var Sigma;(()=>{var e={699:e=>{"use strict";var t,r="object"==typeof Reflect?Reflect:null,i=r&&"function"==typeof r.apply?r.apply:function(e,t,r){return Function.prototype.apply.call(e,t,r)};t=r&&"function"==typeof r.ownKeys?r.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var n=Number.isNaN||function(e){return e!=e};function o(){o.init.call(this)}e.exports=o,e.exports.once=function(e,t){return new Promise((function(r,i){function n(r){e.removeListener(t,o),i(r)}function o(){"function"==typeof e.removeListener&&e.removeListener("error",n),r([].slice.call(arguments))}g(e,t,o,{once:!0}),"error"!==t&&function(e,t,r){"function"==typeof e.on&&g(e,"error",t,{once:!0})}(e,n)}))},o.EventEmitter=o,o.prototype._events=void 0,o.prototype._eventsCount=0,o.prototype._maxListeners=void 0;var a=10;function s(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function h(e){return void 0===e._maxListeners?o.defaultMaxListeners:e._maxListeners}function l(e,t,r,i){var n,o,a,l;if(s(r),void 0===(o=e._events)?(o=e._events=Object.create(null),e._eventsCount=0):(void 0!==o.newListener&&(e.emit("newListener",t,r.listener?r.listener:r),o=e._events),a=o[t]),void 0===a)a=o[t]=r,++e._eventsCount;else if("function"==typeof a?a=o[t]=i?[r,a]:[a,r]:i?a.unshift(r):a.push(r),(n=h(e))>0&&a.length>n&&!a.warned){a.warned=!0;var d=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");d.name="MaxListenersExceededWarning",d.emitter=e,d.type=t,d.count=a.length,l=d,console&&console.warn&&console.warn(l)}return e}function d(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function c(e,t,r){var i={fired:!1,wrapFn:void 0,target:e,type:t,listener:r},n=d.bind(i);return n.listener=r,i.wrapFn=n,n}function u(e,t,r){var i=e._events;if(void 0===i)return[];var n=i[t];return void 0===n?[]:"function"==typeof n?r?[n.listener||n]:[n]:r?function(e){for(var t=new Array(e.length),r=0;r<t.length;++r)t[r]=e[r].listener||e[r];return t}(n):p(n,n.length)}function f(e){var t=this._events;if(void 0!==t){var r=t[e];if("function"==typeof r)return 1;if(void 0!==r)return r.length}return 0}function p(e,t){for(var r=new Array(t),i=0;i<t;++i)r[i]=e[i];return r}function g(e,t,r,i){if("function"==typeof e.on)i.once?e.once(t,r):e.on(t,r);else{if("function"!=typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(t,(function n(o){i.once&&e.removeEventListener(t,n),r(o)}))}}Object.defineProperty(o,"defaultMaxListeners",{enumerable:!0,get:function(){return a},set:function(e){if("number"!=typeof e||e<0||n(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");a=e}}),o.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},o.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||n(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},o.prototype.getMaxListeners=function(){return h(this)},o.prototype.emit=function(e){for(var t=[],r=1;r<arguments.length;r++)t.push(arguments[r]);var n="error"===e,o=this._events;if(void 0!==o)n=n&&void 0===o.error;else if(!n)return!1;if(n){var a;if(t.length>0&&(a=t[0]),a instanceof Error)throw a;var s=new Error("Unhandled error."+(a?" ("+a.message+")":""));throw s.context=a,s}var h=o[e];if(void 0===h)return!1;if("function"==typeof h)i(h,this,t);else{var l=h.length,d=p(h,l);for(r=0;r<l;++r)i(d[r],this,t)}return!0},o.prototype.addListener=function(e,t){return l(this,e,t,!1)},o.prototype.on=o.prototype.addListener,o.prototype.prependListener=function(e,t){return l(this,e,t,!0)},o.prototype.once=function(e,t){return s(t),this.on(e,c(this,e,t)),this},o.prototype.prependOnceListener=function(e,t){return s(t),this.prependListener(e,c(this,e,t)),this},o.prototype.removeListener=function(e,t){var r,i,n,o,a;if(s(t),void 0===(i=this._events))return this;if(void 0===(r=i[e]))return this;if(r===t||r.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete i[e],i.removeListener&&this.emit("removeListener",e,r.listener||t));else if("function"!=typeof r){for(n=-1,o=r.length-1;o>=0;o--)if(r[o]===t||r[o].listener===t){a=r[o].listener,n=o;break}if(n<0)return this;0===n?r.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(r,n),1===r.length&&(i[e]=r[0]),void 0!==i.removeListener&&this.emit("removeListener",e,a||t)}return this},o.prototype.off=o.prototype.removeListener,o.prototype.removeAllListeners=function(e){var t,r,i;if(void 0===(r=this._events))return this;if(void 0===r.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==r[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete r[e]),this;if(0===arguments.length){var n,o=Object.keys(r);for(i=0;i<o.length;++i)"removeListener"!==(n=o[i])&&this.removeAllListeners(n);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=r[e]))this.removeListener(e,t);else if(void 0!==t)for(i=t.length-1;i>=0;i--)this.removeListener(e,t[i]);return this},o.prototype.listeners=function(e){return u(this,e,!0)},o.prototype.rawListeners=function(e){return u(this,e,!1)},o.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):f.call(e,t)},o.prototype.listenerCount=f,o.prototype.eventNames=function(){return this._eventsCount>0?t(this._events):[]}},880:e=>{e.exports=function(e){return null!==e&&"object"==typeof e&&"function"==typeof e.addUndirectedEdgeWithKey&&"function"==typeof e.dropNode&&"boolean"==typeof e.multi}},710:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>i});const i="precision mediump float;\n\nvarying vec4 v_color;\n\nvoid main(void) {\n  gl_FragColor = v_color;\n}\n"},766:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>i});const i="attribute vec2 a_position;\nattribute vec2 a_normal;\nattribute float a_radius;\nattribute vec3 a_barycentric;\n\n#ifdef PICKING_MODE\nattribute vec4 a_id;\n#else\nattribute vec4 a_color;\n#endif\n\nuniform mat3 u_matrix;\nuniform float u_sizeRatio;\nuniform float u_correctionRatio;\n\nvarying vec4 v_color;\n\nconst float minThickness = 1.7;\nconst float bias = 255.0 / 254.0;\nconst float arrowHeadWidthLengthRatio = 0.66;\nconst float arrowHeadLengthThicknessRatio = 2.5;\n\nvoid main() {\n  float normalLength = length(a_normal);\n  vec2 unitNormal = a_normal / normalLength;\n\n  // These first computations are taken from edge.vert.glsl and\n  // edge.clamped.vert.glsl. Please read it to get better comments on what's\n  // happening:\n  float pixelsThickness = max(normalLength, minThickness * u_sizeRatio);\n  float webGLThickness = pixelsThickness * u_correctionRatio / u_sizeRatio;\n  float webGLNodeRadius = a_radius * 2.0 * u_correctionRatio / u_sizeRatio;\n  float webGLArrowHeadLength = webGLThickness * 2.0 * arrowHeadLengthThicknessRatio;\n  float webGLArrowHeadHalfWidth = webGLArrowHeadLength * arrowHeadWidthLengthRatio / 2.0;\n\n  float da = a_barycentric.x;\n  float db = a_barycentric.y;\n  float dc = a_barycentric.z;\n\n  vec2 delta = vec2(\n      da * (webGLNodeRadius * unitNormal.y)\n    + db * ((webGLNodeRadius + webGLArrowHeadLength) * unitNormal.y + webGLArrowHeadHalfWidth * unitNormal.x)\n    + dc * ((webGLNodeRadius + webGLArrowHeadLength) * unitNormal.y - webGLArrowHeadHalfWidth * unitNormal.x),\n\n      da * (-webGLNodeRadius * unitNormal.x)\n    + db * (-(webGLNodeRadius + webGLArrowHeadLength) * unitNormal.x + webGLArrowHeadHalfWidth * unitNormal.y)\n    + dc * (-(webGLNodeRadius + webGLArrowHeadLength) * unitNormal.x - webGLArrowHeadHalfWidth * unitNormal.y)\n  );\n\n  vec2 position = (u_matrix * vec3(a_position + delta, 1)).xy;\n\n  gl_Position = vec4(position, 0, 1);\n\n  #ifdef PICKING_MODE\n  // For picking mode, we use the ID as the color:\n  v_color = a_id;\n  #else\n  // For normal mode, we use the color:\n  v_color = a_color;\n  #endif\n\n  v_color.a *= bias;\n}\n"},103:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>i});const i="attribute vec4 a_id;\nattribute vec4 a_color;\nattribute vec2 a_normal;\nattribute float a_normalCoef;\nattribute vec2 a_positionStart;\nattribute vec2 a_positionEnd;\nattribute float a_positionCoef;\nattribute float a_radius;\nattribute float a_radiusCoef;\n\nuniform mat3 u_matrix;\nuniform float u_zoomRatio;\nuniform float u_sizeRatio;\nuniform float u_correctionRatio;\n\nvarying vec4 v_color;\nvarying vec2 v_normal;\nvarying float v_thickness;\n\nconst float minThickness = 1.7;\nconst float bias = 255.0 / 254.0;\nconst float arrowHeadLengthThicknessRatio = 2.5;\n\nvoid main() {\n  float radius = a_radius * a_radiusCoef;\n  vec2 normal = a_normal * a_normalCoef;\n  vec2 position = a_positionStart * (1.0 - a_positionCoef) + a_positionEnd * a_positionCoef;\n\n  float normalLength = length(normal);\n  vec2 unitNormal = normal / normalLength;\n\n  // These first computations are taken from edge.vert.glsl. Please read it to\n  // get better comments on what's happening:\n  float pixelsThickness = max(normalLength, minThickness * u_sizeRatio);\n  float webGLThickness = pixelsThickness * u_correctionRatio / u_sizeRatio;\n\n  // Here, we move the point to leave space for the arrow head:\n  float direction = sign(radius);\n  float webGLNodeRadius = direction * radius * 2.0 * u_correctionRatio / u_sizeRatio;\n  float webGLArrowHeadLength = webGLThickness * 2.0 * arrowHeadLengthThicknessRatio;\n\n  vec2 compensationVector = vec2(-direction * unitNormal.y, direction * unitNormal.x) * (webGLNodeRadius + webGLArrowHeadLength);\n\n  // Here is the proper position of the vertex\n  gl_Position = vec4((u_matrix * vec3(position + unitNormal * webGLThickness + compensationVector, 1)).xy, 0, 1);\n\n  v_thickness = webGLThickness / u_zoomRatio;\n\n  v_normal = unitNormal;\n\n  #ifdef PICKING_MODE\n  // For picking mode, we use the ID as the color:\n  v_color = a_id;\n  #else\n  // For normal mode, we use the color:\n  v_color = a_color;\n  #endif\n\n  v_color.a *= bias;\n}\n"},755:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>i});const i="precision mediump float;\n\nvarying vec4 v_color;\nvarying vec2 v_normal;\nvarying float v_thickness;\n\nconst float feather = 0.001;\nconst vec4 transparent = vec4(0.0, 0.0, 0.0, 0.0);\n\nvoid main(void) {\n  // We only handle antialiasing for normal mode:\n  #ifdef PICKING_MODE\n  gl_FragColor = v_color;\n  #else\n  float dist = length(v_normal) * v_thickness;\n\n  float t = smoothstep(\n    v_thickness - feather,\n    v_thickness,\n    dist\n  );\n\n  gl_FragColor = mix(v_color, transparent, t);\n  #endif\n}\n"},666:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>i});const i='attribute vec4 a_id;\nattribute vec4 a_color;\nattribute vec2 a_normal;\nattribute float a_normalCoef;\nattribute vec2 a_positionStart;\nattribute vec2 a_positionEnd;\nattribute float a_positionCoef;\n\nuniform mat3 u_matrix;\nuniform float u_sizeRatio;\nuniform float u_zoomRatio;\nuniform float u_correctionRatio;\n\nvarying vec4 v_color;\nvarying vec2 v_normal;\nvarying float v_thickness;\n\nconst float minThickness = 1.7;\nconst float bias = 255.0 / 254.0;\n\nvoid main() {\n  vec2 normal = a_normal * a_normalCoef;\n  vec2 position = a_positionStart * (1.0 - a_positionCoef) + a_positionEnd * a_positionCoef;\n\n  float normalLength = length(normal);\n  vec2 unitNormal = normal / normalLength;\n\n  // We require edges to be at least `minThickness` pixels thick *on screen*\n  // (so we need to compensate the size ratio):\n  float pixelsThickness = max(normalLength, minThickness * u_sizeRatio);\n\n  // Then, we need to retrieve the normalized thickness of the edge in the WebGL\n  // referential (in a ([0, 1], [0, 1]) space), using our "magic" correction\n  // ratio:\n  float webGLThickness = pixelsThickness * u_correctionRatio / u_sizeRatio;\n\n  // Here is the proper position of the vertex\n  gl_Position = vec4((u_matrix * vec3(position + unitNormal * webGLThickness, 1)).xy, 0, 1);\n\n  // For the fragment shader though, we need a thickness that takes the "magic"\n  // correction ratio into account (as in webGLThickness), but so that the\n  // antialiasing effect does not depend on the zoom level. So here\'s yet\n  // another thickness version:\n  v_thickness = webGLThickness / u_zoomRatio;\n\n  v_normal = unitNormal;\n\n  #ifdef PICKING_MODE\n  // For picking mode, we use the ID as the color:\n  v_color = a_id;\n  #else\n  // For normal mode, we use the color:\n  v_color = a_color;\n  #endif\n\n  v_color.a *= bias;\n}\n'},669:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>i});const i="precision mediump float;\n\nvarying vec4 v_color;\nvarying float v_border;\n\nconst float radius = 0.5;\nconst vec4 transparent = vec4(0.0, 0.0, 0.0, 0.0);\n\nvoid main(void) {\n  vec2 m = gl_PointCoord - vec2(0.5, 0.5);\n  float dist = radius - length(m);\n\n  // No antialiasing for picking mode:\n  #ifdef PICKING_MODE\n  if (dist > v_border)\n    gl_FragColor = v_color;\n  else\n    gl_FragColor = transparent;\n\n  #else\n  float t = 0.0;\n  if (dist > v_border)\n    t = 1.0;\n  else if (dist > 0.0)\n    t = dist / v_border;\n\n  gl_FragColor = mix(transparent, v_color, t);\n  #endif\n}\n"},185:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>i});const i="attribute vec4 a_id;\nattribute vec4 a_color;\nattribute vec2 a_position;\nattribute float a_size;\n\nuniform float u_sizeRatio;\nuniform float u_pixelRatio;\nuniform mat3 u_matrix;\n\nvarying vec4 v_color;\nvarying float v_border;\n\nconst float bias = 255.0 / 254.0;\n\nvoid main() {\n  gl_Position = vec4(\n    (u_matrix * vec3(a_position, 1)).xy,\n    0,\n    1\n  );\n\n  // Multiply the point size twice:\n  //  - x SCALING_RATIO to correct the canvas scaling\n  //  - x 2 to correct the formulae\n  gl_PointSize = a_size / u_sizeRatio * u_pixelRatio * 2.0;\n\n  v_border = (0.5 / a_size) * u_sizeRatio;\n\n  #ifdef PICKING_MODE\n  // For picking mode, we use the ID as the color:\n  v_color = a_id;\n  #else\n  // For normal mode, we use the color:\n  v_color = a_color;\n  #endif\n\n  v_color.a *= bias;\n}\n"},389:function(e,t,r){"use strict";var i,n=this&&this.__extends||(i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},i(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var a=r(778),s=o(r(856)),h=r(797),l=r(173),d=1.5,c=function(e){function t(){var t=e.call(this)||this;return t.x=.5,t.y=.5,t.angle=0,t.ratio=1,t.minRatio=null,t.maxRatio=null,t.nextFrame=null,t.previousState=null,t.enabled=!0,t.previousState=t.getState(),t}return n(t,e),t.from=function(e){return(new t).setState(e)},t.prototype.enable=function(){return this.enabled=!0,this},t.prototype.disable=function(){return this.enabled=!1,this},t.prototype.getState=function(){return{x:this.x,y:this.y,angle:this.angle,ratio:this.ratio}},t.prototype.hasState=function(e){return this.x===e.x&&this.y===e.y&&this.ratio===e.ratio&&this.angle===e.angle},t.prototype.getPreviousState=function(){var e=this.previousState;return e?{x:e.x,y:e.y,angle:e.angle,ratio:e.ratio}:null},t.prototype.getBoundedRatio=function(e){var t=e;return"number"==typeof this.minRatio&&(t=Math.max(t,this.minRatio)),"number"==typeof this.maxRatio&&(t=Math.min(t,this.maxRatio)),t},t.prototype.validateState=function(e){var t={};return"number"==typeof e.x&&(t.x=e.x),"number"==typeof e.y&&(t.y=e.y),"number"==typeof e.angle&&(t.angle=e.angle),"number"==typeof e.ratio&&(t.ratio=this.getBoundedRatio(e.ratio)),t},t.prototype.isAnimated=function(){return!!this.nextFrame},t.prototype.setState=function(e){if(!this.enabled)return this;this.previousState=this.getState();var t=this.validateState(e);return"number"==typeof t.x&&(this.x=t.x),"number"==typeof t.y&&(this.y=t.y),"number"==typeof t.angle&&(this.angle=t.angle),"number"==typeof t.ratio&&(this.ratio=t.ratio),this.hasState(this.previousState)||this.emit("updated",this.getState()),this},t.prototype.updateState=function(e){return this.setState(e(this.getState())),this},t.prototype.animate=function(e,t,r){var i=this;if(this.enabled){var n=Object.assign({},a.ANIMATE_DEFAULTS,t),o=this.validateState(e),l="function"==typeof n.easing?n.easing:s.default[n.easing],d=Date.now(),c=this.getState(),u=function(){var e=(Date.now()-d)/n.duration;if(e>=1)return i.nextFrame=null,i.setState(o),void(i.animationCallback&&(i.animationCallback.call(null),i.animationCallback=void 0));var t=l(e),r={};"number"==typeof o.x&&(r.x=c.x+(o.x-c.x)*t),"number"==typeof o.y&&(r.y=c.y+(o.y-c.y)*t),"number"==typeof o.angle&&(r.angle=c.angle+(o.angle-c.angle)*t),"number"==typeof o.ratio&&(r.ratio=c.ratio+(o.ratio-c.ratio)*t),i.setState(r),i.nextFrame=(0,h.requestFrame)(u)};this.nextFrame?((0,h.cancelFrame)(this.nextFrame),this.animationCallback&&this.animationCallback.call(null),this.nextFrame=(0,h.requestFrame)(u)):u(),this.animationCallback=r}},t.prototype.animatedZoom=function(e){if(e){if("number"==typeof e)return this.animate({ratio:this.ratio/e});this.animate({ratio:this.ratio/(e.factor||d)},e)}else this.animate({ratio:this.ratio/d})},t.prototype.animatedUnzoom=function(e){if(e){if("number"==typeof e)return this.animate({ratio:this.ratio*e});this.animate({ratio:this.ratio*(e.factor||d)},e)}else this.animate({ratio:this.ratio*d})},t.prototype.animatedReset=function(e){this.animate({x:.5,y:.5,ratio:1,angle:0},e)},t.prototype.copy=function(){return t.from(this.getState())},t}(l.TypedEventEmitter);t.default=c},342:function(e,t,r){"use strict";var i,n=this&&this.__extends||(i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},i(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=this&&this.__assign||function(){return o=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},o.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.getWheelDelta=t.getTouchCoords=t.getTouchesArray=t.getWheelCoords=t.getMouseCoords=t.getPosition=void 0;var a=r(173);function s(e,t){var r=t.getBoundingClientRect();return{x:e.clientX-r.left,y:e.clientY-r.top}}function h(e,t){var r=o(o({},s(e,t)),{sigmaDefaultPrevented:!1,preventSigmaDefault:function(){r.sigmaDefaultPrevented=!0},original:e});return r}t.getPosition=s,t.getMouseCoords=h,t.getWheelCoords=function(e,t){return o(o({},h(e,t)),{delta:d(e)})};function l(e){for(var t=[],r=0,i=Math.min(e.length,2);r<i;r++)t.push(e[r]);return t}function d(e){if(void 0!==e.deltaY)return-3*e.deltaY/360;if(void 0!==e.detail)return e.detail/-9;throw new Error("Captor: could not extract delta from event.")}t.getTouchesArray=l,t.getTouchCoords=function(e,t){return{touches:l(e.touches).map((function(e){return s(e,t)})),original:e}},t.getWheelDelta=d;var c=function(e){function t(t,r){var i=e.call(this)||this;return i.container=t,i.renderer=r,i}return n(t,e),t}(a.TypedEventEmitter);t.default=c},700:function(e,t,r){"use strict";var i,n=this&&this.__extends||(i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},i(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=this&&this.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r);var n=Object.getOwnPropertyDescriptor(t,r);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,i,n)}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&o(t,e,r);return a(t,e),t};Object.defineProperty(t,"__esModule",{value:!0});var h=s(r(342)),l=function(e){function t(t,r){var i=e.call(this,t,r)||this;return i.enabled=!0,i.draggedEvents=0,i.downStartTime=null,i.lastMouseX=null,i.lastMouseY=null,i.isMouseDown=!1,i.isMoving=!1,i.movingTimeout=null,i.startCameraState=null,i.clicks=0,i.doubleClickTimeout=null,i.currentWheelDirection=0,i.handleClick=i.handleClick.bind(i),i.handleRightClick=i.handleRightClick.bind(i),i.handleDown=i.handleDown.bind(i),i.handleUp=i.handleUp.bind(i),i.handleMove=i.handleMove.bind(i),i.handleWheel=i.handleWheel.bind(i),i.handleOut=i.handleOut.bind(i),t.addEventListener("click",i.handleClick,!1),t.addEventListener("contextmenu",i.handleRightClick,!1),t.addEventListener("mousedown",i.handleDown,!1),t.addEventListener("wheel",i.handleWheel,!1),t.addEventListener("mouseout",i.handleOut,!1),document.addEventListener("mousemove",i.handleMove,!1),document.addEventListener("mouseup",i.handleUp,!1),i}return n(t,e),t.prototype.kill=function(){var e=this.container;e.removeEventListener("click",this.handleClick),e.removeEventListener("contextmenu",this.handleRightClick),e.removeEventListener("mousedown",this.handleDown),e.removeEventListener("wheel",this.handleWheel),e.removeEventListener("mouseout",this.handleOut),document.removeEventListener("mousemove",this.handleMove),document.removeEventListener("mouseup",this.handleUp)},t.prototype.handleClick=function(e){var t=this;if(this.enabled){if(this.clicks++,2===this.clicks)return this.clicks=0,"number"==typeof this.doubleClickTimeout&&(clearTimeout(this.doubleClickTimeout),this.doubleClickTimeout=null),this.handleDoubleClick(e);setTimeout((function(){t.clicks=0,t.doubleClickTimeout=null}),300),this.draggedEvents<3&&this.emit("click",(0,h.getMouseCoords)(e,this.container))}},t.prototype.handleRightClick=function(e){this.enabled&&this.emit("rightClick",(0,h.getMouseCoords)(e,this.container))},t.prototype.handleDoubleClick=function(e){if(this.enabled){e.preventDefault(),e.stopPropagation();var t=(0,h.getMouseCoords)(e,this.container);if(this.emit("doubleClick",t),!t.sigmaDefaultPrevented){var r=this.renderer.getCamera(),i=r.getBoundedRatio(r.getState().ratio/2.2);r.animate(this.renderer.getViewportZoomedState((0,h.getPosition)(e,this.container),i),{easing:"quadraticInOut",duration:200})}}},t.prototype.handleDown=function(e){if(this.enabled){if(0===e.button){this.startCameraState=this.renderer.getCamera().getState();var t=(0,h.getPosition)(e,this.container),r=t.x,i=t.y;this.lastMouseX=r,this.lastMouseY=i,this.draggedEvents=0,this.downStartTime=Date.now(),this.isMouseDown=!0}this.emit("mousedown",(0,h.getMouseCoords)(e,this.container))}},t.prototype.handleUp=function(e){var t=this;if(this.enabled&&this.isMouseDown){var r=this.renderer.getCamera();this.isMouseDown=!1,"number"==typeof this.movingTimeout&&(clearTimeout(this.movingTimeout),this.movingTimeout=null);var i=(0,h.getPosition)(e,this.container),n=i.x,o=i.y,a=r.getState(),s=r.getPreviousState()||{x:0,y:0};this.isMoving?r.animate({x:a.x+3*(a.x-s.x),y:a.y+3*(a.y-s.y)},{duration:200,easing:"quadraticOut"}):this.lastMouseX===n&&this.lastMouseY===o||r.setState({x:a.x,y:a.y}),this.isMoving=!1,setTimeout((function(){var e=t.draggedEvents>0;t.draggedEvents=0,e&&t.renderer.refresh()}),0),this.emit("mouseup",(0,h.getMouseCoords)(e,this.container))}},t.prototype.handleMove=function(e){var t=this;if(this.enabled){var r=(0,h.getMouseCoords)(e,this.container);if(this.emit("mousemovebody",r),e.target===this.container&&this.emit("mousemove",r),!r.sigmaDefaultPrevented&&this.isMouseDown){this.isMoving=!0,this.draggedEvents++,"number"==typeof this.movingTimeout&&clearTimeout(this.movingTimeout),this.movingTimeout=window.setTimeout((function(){t.movingTimeout=null,t.isMoving=!1}),100);var i=this.renderer.getCamera(),n=(0,h.getPosition)(e,this.container),o=n.x,a=n.y,s=this.renderer.viewportToFramedGraph({x:this.lastMouseX,y:this.lastMouseY}),l=this.renderer.viewportToFramedGraph({x:o,y:a}),d=s.x-l.x,c=s.y-l.y,u=i.getState(),f=u.x+d,p=u.y+c;i.setState({x:f,y:p}),this.lastMouseX=o,this.lastMouseY=a,e.preventDefault(),e.stopPropagation()}}},t.prototype.handleWheel=function(e){var t=this;if(this.enabled){e.preventDefault(),e.stopPropagation();var r=(0,h.getWheelDelta)(e);if(r){var i=(0,h.getWheelCoords)(e,this.container);if(this.emit("wheel",i),!i.sigmaDefaultPrevented){var n=r>0?1/1.7:1.7,o=this.renderer.getCamera(),a=o.getBoundedRatio(o.getState().ratio*n),s=r>0?1:-1,l=Date.now();this.currentWheelDirection===s&&this.lastWheelTriggerTime&&l-this.lastWheelTriggerTime<50||(o.animate(this.renderer.getViewportZoomedState((0,h.getPosition)(e,this.container),a),{easing:"quadraticOut",duration:250},(function(){t.currentWheelDirection=0})),this.currentWheelDirection=s,this.lastWheelTriggerTime=l)}}}},t.prototype.handleOut=function(){},t}(h.default);t.default=l},792:function(e,t,r){"use strict";var i,n=this&&this.__extends||(i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},i(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=this&&this.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r);var n=Object.getOwnPropertyDescriptor(t,r);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,i,n)}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&o(t,e,r);return a(t,e),t},h=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var i,n,o=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(i=o.next()).done;)a.push(i.value)}catch(e){n={error:e}}finally{try{i&&!i.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}return a};Object.defineProperty(t,"__esModule",{value:!0});var l=s(r(342)),d=function(e){function t(t,r){var i=e.call(this,t,r)||this;return i.enabled=!0,i.isMoving=!1,i.hasMoved=!1,i.touchMode=0,i.startTouchesPositions=[],i.handleStart=i.handleStart.bind(i),i.handleLeave=i.handleLeave.bind(i),i.handleMove=i.handleMove.bind(i),t.addEventListener("touchstart",i.handleStart,!1),t.addEventListener("touchend",i.handleLeave,!1),t.addEventListener("touchcancel",i.handleLeave,!1),t.addEventListener("touchmove",i.handleMove,!1),i}return n(t,e),t.prototype.kill=function(){var e=this.container;e.removeEventListener("touchstart",this.handleStart),e.removeEventListener("touchend",this.handleLeave),e.removeEventListener("touchcancel",this.handleLeave),e.removeEventListener("touchmove",this.handleMove)},t.prototype.getDimensions=function(){return{width:this.container.offsetWidth,height:this.container.offsetHeight}},t.prototype.dispatchRelatedMouseEvent=function(e,t,r,i){var n=r||t.touches[0],o=new MouseEvent(e,{clientX:n.clientX,clientY:n.clientY,altKey:t.altKey,ctrlKey:t.ctrlKey});o.isFakeSigmaMouseEvent=!0,(i||this.container).dispatchEvent(o)},t.prototype.handleStart=function(e){var t=this;if(this.enabled){e.preventDefault(),1===e.touches.length&&this.dispatchRelatedMouseEvent("mousedown",e);var r=(0,l.getTouchesArray)(e.touches);if(this.touchMode=r.length,this.startCameraState=this.renderer.getCamera().getState(),this.startTouchesPositions=r.map((function(e){return(0,l.getPosition)(e,t.container)})),this.lastTouches=r,this.lastTouchesPositions=this.startTouchesPositions,2===this.touchMode){var i=h(this.startTouchesPositions,2),n=i[0],o=n.x,a=n.y,s=i[1],d=s.x,c=s.y;this.startTouchesAngle=Math.atan2(c-a,d-o),this.startTouchesDistance=Math.sqrt(Math.pow(d-o,2)+Math.pow(c-a,2))}this.emit("touchdown",(0,l.getTouchCoords)(e,this.container))}},t.prototype.handleLeave=function(e){if(this.enabled){switch(e.preventDefault(),0===e.touches.length&&this.lastTouches&&this.lastTouches.length&&(this.dispatchRelatedMouseEvent("mouseup",e,this.lastTouches[0],document),this.hasMoved||this.dispatchRelatedMouseEvent("click",e,this.lastTouches[0])),this.movingTimeout&&(this.isMoving=!1,clearTimeout(this.movingTimeout)),this.touchMode){case 2:if(1===e.touches.length){this.handleStart(e),e.preventDefault();break}case 1:if(this.isMoving){var t=this.renderer.getCamera(),r=t.getState(),i=t.getPreviousState()||{x:0,y:0};t.animate({x:r.x+3*(r.x-i.x),y:r.y+3*(r.y-i.y)},{duration:200,easing:"quadraticOut"})}this.hasMoved=!1,this.isMoving=!1,this.touchMode=0}this.emit("touchup",(0,l.getTouchCoords)(e,this.container))}},t.prototype.handleMove=function(e){var t,r=this;if(this.enabled){e.preventDefault(),1===e.touches.length&&this.dispatchRelatedMouseEvent("mousemove",e);var i=(0,l.getTouchesArray)(e.touches),n=i.map((function(e){return(0,l.getPosition)(e,r.container)}));if(this.lastTouches=i,this.lastTouchesPositions=n,this.hasMoved||(this.hasMoved=n.some((function(e,t){var i=r.startTouchesPositions[t];return e.x!==i.x||e.y!==i.y}))),this.hasMoved){this.isMoving=!0,this.movingTimeout&&clearTimeout(this.movingTimeout),this.movingTimeout=window.setTimeout((function(){r.isMoving=!1}),200);var o=this.renderer.getCamera(),a=this.startCameraState;switch(this.touchMode){case 1:var s=this.renderer.viewportToFramedGraph((this.startTouchesPositions||[])[0]),d=s.x,c=s.y,u=this.renderer.viewportToFramedGraph(n[0]),f=u.x,p=u.y;o.setState({x:a.x+d-f,y:a.y+c-p});break;case 2:var g={},v=n[0],m=v.x,y=v.y,b=n[1],_=b.x,E=b.y,x=Math.atan2(E-y,_-m)-this.startTouchesAngle,w=Math.hypot(E-y,_-m)/this.startTouchesDistance,T=o.getBoundedRatio(a.ratio/w);g.ratio=T,g.angle=a.angle+x;var C=this.getDimensions(),S=this.renderer.viewportToFramedGraph((this.startTouchesPositions||[])[0],{cameraState:a}),R=Math.min(C.width,C.height),L=R/C.width,F=T/R;p=y-R/2/(R/C.height),f=(t=h([(f=m-R/2/L)*Math.cos(-g.angle)-p*Math.sin(-g.angle),p*Math.cos(-g.angle)+f*Math.sin(-g.angle)],2))[0],p=t[1],g.x=S.x-f*F,g.y=S.y+p*F,o.setState(g)}this.emit("touchmove",(0,l.getTouchCoords)(e,this.container))}}},t}(l.default);t.default=d},723:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.edgeLabelsToDisplayFromNodes=t.LabelGrid=void 0;var r=function(){function e(e,t){this.key=e,this.size=t}return e.compare=function(e,t){return e.size>t.size?-1:e.size<t.size||e.key>t.key?1:-1},e}(),i=function(){function e(){this.width=0,this.height=0,this.cellSize=0,this.columns=0,this.rows=0,this.cells={}}return e.prototype.resizeAndClear=function(e,t){this.width=e.width,this.height=e.height,this.cellSize=t,this.columns=Math.ceil(e.width/t),this.rows=Math.ceil(e.height/t),this.cells={}},e.prototype.getIndex=function(e){var t=Math.floor(e.x/this.cellSize);return Math.floor(e.y/this.cellSize)*this.columns+t},e.prototype.add=function(e,t,i){var n=new r(e,t),o=this.getIndex(i),a=this.cells[o];a||(a=[],this.cells[o]=a),a.push(n)},e.prototype.organize=function(){for(var e in this.cells)this.cells[e].sort(r.compare)},e.prototype.getLabelsToDisplay=function(e,t){var r=this.cellSize*this.cellSize,i=r/e/e*t/r,n=Math.ceil(i),o=[];for(var a in this.cells)for(var s=this.cells[a],h=0;h<Math.min(n,s.length);h++)o.push(s[h].key);return o},e}();t.LabelGrid=i,t.edgeLabelsToDisplayFromNodes=function(e){var t=e.graph,r=e.hoveredNode,i=e.highlightedNodes,n=e.displayedNodeLabels,o=[];return t.forEachEdge((function(e,t,a,s){(a===r||s===r||i.has(a)||i.has(s)||n.has(a)&&n.has(s))&&o.push(e)})),o}},466:function(e,t,r){"use strict";var i,n=this&&this.__extends||(i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},i(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Sigma=void 0;var a=o(r(303)),s=o(r(389)),h=o(r(700)),l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.Camera=s.default,t.MouseCaptor=h.default,t.Sigma=a.default,t}(a.default);t.Sigma=l},109:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.drawStraightEdgeLabel=void 0,t.drawStraightEdgeLabel=function(e,t,r,i,n){var o=n.edgeLabelSize,a=n.edgeLabelFont,s=n.edgeLabelWeight,h=n.edgeLabelColor.attribute?t[n.edgeLabelColor.attribute]||n.edgeLabelColor.color||"#000":n.edgeLabelColor.color,l=t.label;if(l){e.fillStyle=h,e.font="".concat(s," ").concat(o,"px ").concat(a);var d,c,u=r.size,f=i.size,p=r.x,g=r.y,v=i.x,m=i.y,y=v-p,b=m-g,_=Math.sqrt(y*y+b*b);if(!(_<u+f)){d=((p+=y*u/_)+(v-=y*f/_))/2,c=((g+=b*u/_)+(m-=b*f/_))/2,y=v-p,b=m-g,_=Math.sqrt(y*y+b*b);var E,x=e.measureText(l).width;if(x>_){for(l+="…",x=e.measureText(l).width;x>_&&l.length>1;)l=l.slice(0,-2)+"…",x=e.measureText(l).width;if(l.length<4)return}E=y>0?b>0?Math.acos(y/_):Math.asin(b/_):b>0?Math.acos(y/_)+Math.PI:Math.asin(y/_)+Math.PI/2,e.save(),e.translate(d,c),e.rotate(E),e.fillText(l,-x/2,t.size/2+o),e.restore()}}}},229:function(e,t,r){"use strict";var i,n=this&&this.__extends||(i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},i(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.createEdgeCompoundProgram=t.EdgeProgram=t.AbstractEdgeProgram=void 0;var o=r(616),a=r(797),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t}(o.AbstractProgram);t.AbstractEdgeProgram=s;var h=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.kill=function(){},t.prototype.process=function(e,t,r,i,n){var o=t*this.STRIDE;if(!(n.hidden||r.hidden||i.hidden))return this.processVisibleItem((0,a.indexToColor)(e),o,r,i,n);for(var s=o+this.STRIDE;o<s;o++)this.array[o]=0},t.drawLabel=void 0,t}(o.Program);t.EdgeProgram=h,function(){function e(e,t,r){return this}e.prototype.kill=function(){},e.prototype.reallocate=function(e){},e.prototype.process=function(e,t,r,i,n){},e.prototype.render=function(e){},e.drawLabel=void 0}(),t.createEdgeCompoundProgram=function(e,t){var r;return(r=function(){function t(t,r,i){this.programs=e.map((function(e){return new e(t,r,i)}))}return t.prototype.reallocate=function(e){this.programs.forEach((function(t){return t.reallocate(e)}))},t.prototype.process=function(e,t,r,i,n){this.programs.forEach((function(o){return o.process(e,t,r,i,n)}))},t.prototype.render=function(e){this.programs.forEach((function(t){return t.render(e)}))},t.prototype.kill=function(){this.programs.forEach((function(e){return e.kill()}))},t}()).drawLabel=t,r}},66:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.drawDiscNodeHover=void 0;var i=r(787);t.drawDiscNodeHover=function(e,t,r){var n=r.labelSize,o=r.labelFont,a=r.labelWeight;if(e.font="".concat(a," ").concat(n,"px ").concat(o),e.fillStyle="#FFF",e.shadowOffsetX=0,e.shadowOffsetY=0,e.shadowBlur=8,e.shadowColor="#000","string"==typeof t.label){var s=e.measureText(t.label).width,h=Math.round(s+5),l=Math.round(n+4),d=Math.max(t.size,n/2)+2,c=Math.asin(l/2/d),u=Math.sqrt(Math.abs(Math.pow(d,2)-Math.pow(l/2,2)));e.beginPath(),e.moveTo(t.x+u,t.y+l/2),e.lineTo(t.x+d+h,t.y+l/2),e.lineTo(t.x+d+h,t.y-l/2),e.lineTo(t.x+u,t.y-l/2),e.arc(t.x,t.y,d,c,-c),e.closePath(),e.fill()}else e.beginPath(),e.arc(t.x,t.y,t.size+2,0,2*Math.PI),e.closePath(),e.fill();e.shadowOffsetX=0,e.shadowOffsetY=0,e.shadowBlur=0,(0,i.drawDiscNodeLabel)(e,t,r)}},787:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.drawDiscNodeLabel=void 0,t.drawDiscNodeLabel=function(e,t,r){if(t.label){var i=r.labelSize,n=r.labelFont,o=r.labelWeight,a=r.labelColor.attribute?t[r.labelColor.attribute]||r.labelColor.color||"#000":r.labelColor.color;e.fillStyle=a,e.font="".concat(o," ").concat(i,"px ").concat(n),e.fillText(t.label,t.x+t.size+3,t.y+i/3)}}},61:function(e,t,r){"use strict";var i,n=this&&this.__extends||(i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},i(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.createNodeCompoundProgram=t.NodeProgram=t.AbstractNodeProgram=void 0;var o=r(616),a=r(797),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t}(o.AbstractProgram);t.AbstractNodeProgram=s;var h=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.kill=function(){},t.prototype.process=function(e,t,r){var i=t*this.STRIDE;if(!r.hidden)return this.processVisibleItem((0,a.indexToColor)(e),i,r);for(var n=i+this.STRIDE;i<n;i++)this.array[i]=0},t.drawLabel=void 0,t.drawHover=void 0,t}(o.Program);t.NodeProgram=h,function(){function e(e,t,r){return this}e.prototype.kill=function(){},e.prototype.reallocate=function(e){},e.prototype.process=function(e,t,r){},e.prototype.render=function(e){},e.drawLabel=void 0,e.drawHover=void 0}(),t.createNodeCompoundProgram=function(e,t,r){var i;return(i=function(){function t(t,r,i){this.programs=e.map((function(e){return new e(t,r,i)}))}return t.prototype.reallocate=function(e){this.programs.forEach((function(t){return t.reallocate(e)}))},t.prototype.process=function(e,t,r){this.programs.forEach((function(i){return i.process(e,t,r)}))},t.prototype.render=function(e){this.programs.forEach((function(t){return t.render(e)}))},t.prototype.kill=function(){this.programs.forEach((function(e){return e.kill()}))},t}()).drawLabel=t,i.drawHover=r,i}},616:function(e,t,r){"use strict";var i,n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},n.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.Program=t.AbstractProgram=void 0;var o=r(63),a="#define PICKING_MODE\n",s=((i={})[WebGL2RenderingContext.BOOL]=1,i[WebGL2RenderingContext.BYTE]=1,i[WebGL2RenderingContext.UNSIGNED_BYTE]=1,i[WebGL2RenderingContext.SHORT]=2,i[WebGL2RenderingContext.UNSIGNED_SHORT]=2,i[WebGL2RenderingContext.INT]=4,i[WebGL2RenderingContext.UNSIGNED_INT]=4,i[WebGL2RenderingContext.FLOAT]=4,i);function h(e){var t=0;return e.forEach((function(e){return t+=function(e){return e.normalized?1:e.size}(e)})),t}t.AbstractProgram=function(e,t,r){};var l=function(){function e(e,t,r){this.array=new Float32Array,this.constantArray=new Float32Array,this.capacity=0,this.verticesCount=0;var i=this.getDefinition();if(this.VERTICES=i.VERTICES,this.VERTEX_SHADER_SOURCE=i.VERTEX_SHADER_SOURCE,this.FRAGMENT_SHADER_SOURCE=i.FRAGMENT_SHADER_SOURCE,this.UNIFORMS=i.UNIFORMS,this.ATTRIBUTES=i.ATTRIBUTES,this.METHOD=i.METHOD,this.CONSTANT_ATTRIBUTES="CONSTANT_ATTRIBUTES"in i?i.CONSTANT_ATTRIBUTES:[],this.CONSTANT_DATA="CONSTANT_DATA"in i?i.CONSTANT_DATA:[],this.isInstanced="CONSTANT_ATTRIBUTES"in i,this.ATTRIBUTES_ITEMS_COUNT=h(this.ATTRIBUTES),this.STRIDE=this.VERTICES*this.ATTRIBUTES_ITEMS_COUNT,this.renderer=r,this.normalProgram=this.getProgramInfo("normal",e,i.VERTEX_SHADER_SOURCE,i.FRAGMENT_SHADER_SOURCE,null),this.pickProgram=t?this.getProgramInfo("pick",e,a+i.VERTEX_SHADER_SOURCE,a+i.FRAGMENT_SHADER_SOURCE,t):null,this.isInstanced){var n=h(this.CONSTANT_ATTRIBUTES);if(this.CONSTANT_DATA.length!==this.VERTICES)throw new Error("Program: error while getting constant data (expected ".concat(this.VERTICES," items, received ").concat(this.CONSTANT_DATA.length," instead)"));this.constantArray=new Float32Array(this.CONSTANT_DATA.length*n);for(var o=0;o<this.CONSTANT_DATA.length;o++){var s=this.CONSTANT_DATA[o];if(s.length!==n)throw new Error("Program: error while getting constant data (one vector has ".concat(s.length," items instead of ").concat(n,")"));for(var l=0;l<s.length;l++)this.constantArray[o*n+l]=s[l]}this.STRIDE=this.ATTRIBUTES_ITEMS_COUNT}}return e.prototype.getProgramInfo=function(e,t,r,i,n){var a=this.getDefinition(),s=t.createBuffer();if(null===s)throw new Error("Program: error while creating the WebGL buffer.");var h=(0,o.loadVertexShader)(t,r),l=(0,o.loadFragmentShader)(t,i),d=(0,o.loadProgram)(t,[h,l]),c={};a.UNIFORMS.forEach((function(e){var r=t.getUniformLocation(d,e);r&&(c[e]=r)}));var u,f={};if(a.ATTRIBUTES.forEach((function(e){f[e.name]=t.getAttribLocation(d,e.name)})),"CONSTANT_ATTRIBUTES"in a&&(a.CONSTANT_ATTRIBUTES.forEach((function(e){f[e.name]=t.getAttribLocation(d,e.name)})),null===(u=t.createBuffer())))throw new Error("Program: error while creating the WebGL constant buffer.");return{name:e,program:d,gl:t,frameBuffer:n,buffer:s,constantBuffer:u||{},uniformLocations:c,attributeLocations:f,isPicking:"pick"===e}},e.prototype.bindProgram=function(e){var t=this,r=0,i=e.gl,n=e.buffer;this.isInstanced?(i.bindBuffer(i.ARRAY_BUFFER,e.constantBuffer),r=0,this.CONSTANT_ATTRIBUTES.forEach((function(i){return r+=t.bindAttribute(i,e,r,!1)})),i.bufferData(i.ARRAY_BUFFER,this.constantArray,i.STATIC_DRAW),i.bindBuffer(i.ARRAY_BUFFER,e.buffer),r=0,this.ATTRIBUTES.forEach((function(i){return r+=t.bindAttribute(i,e,r,!0)})),i.bufferData(i.ARRAY_BUFFER,this.array,i.DYNAMIC_DRAW)):(i.bindBuffer(i.ARRAY_BUFFER,n),r=0,this.ATTRIBUTES.forEach((function(i){return r+=t.bindAttribute(i,e,r)})),i.bufferData(i.ARRAY_BUFFER,this.array,i.DYNAMIC_DRAW)),i.bindBuffer(i.ARRAY_BUFFER,null)},e.prototype.unbindProgram=function(e){var t=this;this.isInstanced?(this.CONSTANT_ATTRIBUTES.forEach((function(r){return t.unbindAttribute(r,e,!1)})),this.ATTRIBUTES.forEach((function(r){return t.unbindAttribute(r,e,!0)}))):this.ATTRIBUTES.forEach((function(r){return t.unbindAttribute(r,e)}))},e.prototype.bindAttribute=function(e,t,r,i){var n=s[e.type];if("number"!=typeof n)throw new Error('Program.bind: yet unsupported attribute type "'.concat(e.type,'"'));var o=t.attributeLocations[e.name],a=t.gl;if(-1!==o){a.enableVertexAttribArray(o);var l=this.isInstanced?(i?this.ATTRIBUTES_ITEMS_COUNT:h(this.CONSTANT_ATTRIBUTES))*Float32Array.BYTES_PER_ELEMENT:this.ATTRIBUTES_ITEMS_COUNT*Float32Array.BYTES_PER_ELEMENT;if(a.vertexAttribPointer(o,e.size,e.type,e.normalized||!1,l,r),this.isInstanced&&i)if(a instanceof WebGL2RenderingContext)a.vertexAttribDivisor(o,1);else{var d=a.getExtension("ANGLE_instanced_arrays");d&&d.vertexAttribDivisorANGLE(o,1)}}return e.size*n},e.prototype.unbindAttribute=function(e,t,r){var i=t.attributeLocations[e.name],n=t.gl;if(-1!==i&&(n.disableVertexAttribArray(i),this.isInstanced&&r))if(n instanceof WebGL2RenderingContext)n.vertexAttribDivisor(i,0);else{var o=n.getExtension("ANGLE_instanced_arrays");o&&o.vertexAttribDivisorANGLE(i,0)}},e.prototype.reallocate=function(e){e!==this.capacity&&(this.capacity=e,this.verticesCount=this.VERTICES*e,this.array=new Float32Array(this.isInstanced?this.capacity*this.ATTRIBUTES_ITEMS_COUNT:this.verticesCount*this.ATTRIBUTES_ITEMS_COUNT))},e.prototype.hasNothingToRender=function(){return 0===this.verticesCount},e.prototype.renderProgram=function(e,t){var r=t.gl,i=t.program;r.enable(r.BLEND),r.useProgram(i),this.setUniforms(e,t),this.drawWebGL(this.METHOD,t)},e.prototype.render=function(e){this.hasNothingToRender()||(this.pickProgram&&(this.pickProgram.gl.viewport(0,0,e.width*e.pixelRatio/e.downSizingRatio,e.height*e.pixelRatio/e.downSizingRatio),this.bindProgram(this.pickProgram),this.renderProgram(n(n({},e),{pixelRatio:e.pixelRatio/e.downSizingRatio}),this.pickProgram),this.unbindProgram(this.pickProgram)),this.normalProgram.gl.viewport(0,0,e.width*e.pixelRatio,e.height*e.pixelRatio),this.bindProgram(this.normalProgram),this.renderProgram(e,this.normalProgram),this.unbindProgram(this.normalProgram))},e.prototype.drawWebGL=function(e,t){var r=t.gl,i=t.frameBuffer;if(r.bindFramebuffer(r.FRAMEBUFFER,i),this.isInstanced)if(r instanceof WebGL2RenderingContext)r.drawArraysInstanced(e,0,this.VERTICES,this.capacity);else{var n=r.getExtension("ANGLE_instanced_arrays");n&&n.drawArraysInstancedANGLE(e,0,this.VERTICES,this.capacity)}else r.drawArrays(e,0,this.verticesCount)},e}();t.Program=l},611:function(e,t,r){"use strict";var i,n=this&&this.__extends||(i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},i(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var a=r(797),s=r(229),h=o(r(766)),l=o(r(710)),d=WebGLRenderingContext.UNSIGNED_BYTE,c=WebGLRenderingContext.FLOAT,u=["u_matrix","u_sizeRatio","u_correctionRatio"],f=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.getDefinition=function(){return{VERTICES:3,VERTEX_SHADER_SOURCE:h.default,FRAGMENT_SHADER_SOURCE:l.default,METHOD:WebGLRenderingContext.TRIANGLES,UNIFORMS:u,ATTRIBUTES:[{name:"a_position",size:2,type:c},{name:"a_normal",size:2,type:c},{name:"a_radius",size:1,type:c},{name:"a_color",size:4,type:d,normalized:!0},{name:"a_id",size:4,type:d,normalized:!0}],CONSTANT_ATTRIBUTES:[{name:"a_barycentric",size:3,type:c}],CONSTANT_DATA:[[1,0,0],[0,1,0],[0,0,1]]}},t.prototype.processVisibleItem=function(e,t,r,i,n){var o=n.size||1,s=i.size||1,h=r.x,l=r.y,d=i.x,c=i.y,u=(0,a.floatColor)(n.color),f=d-h,p=c-l,g=f*f+p*p,v=0,m=0;g&&(v=-p*(g=1/Math.sqrt(g))*o,m=f*g*o);var y=this.array;y[t++]=d,y[t++]=c,y[t++]=-v,y[t++]=-m,y[t++]=s,y[t++]=u,y[t++]=e},t.prototype.setUniforms=function(e,t){var r=t.gl,i=t.uniformLocations,n=i.u_matrix,o=i.u_sizeRatio,a=i.u_correctionRatio;r.uniformMatrix3fv(n,!1,e.matrix),r.uniform1f(o,e.sizeRatio),r.uniform1f(a,e.correctionRatio)},t}(s.EdgeProgram);t.default=f},191:function(e,t,r){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var n=r(229),o=i(r(611)),a=i(r(298)),s=(0,n.createEdgeCompoundProgram)([a.default,o.default]);t.default=s},298:function(e,t,r){"use strict";var i,n=this&&this.__extends||(i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},i(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=this&&this.__assign||function(){return o=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},o.apply(this,arguments)},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=a(r(118)),h=a(r(103)),l=r(797),d=WebGLRenderingContext.UNSIGNED_BYTE,c=WebGLRenderingContext.FLOAT,u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.getDefinition=function(){return o(o({},e.prototype.getDefinition.call(this)),{VERTEX_SHADER_SOURCE:h.default,ATTRIBUTES:[{name:"a_positionStart",size:2,type:c},{name:"a_positionEnd",size:2,type:c},{name:"a_normal",size:2,type:c},{name:"a_color",size:4,type:d,normalized:!0},{name:"a_id",size:4,type:d,normalized:!0},{name:"a_radius",size:1,type:c}],CONSTANT_ATTRIBUTES:[{name:"a_positionCoef",size:1,type:c},{name:"a_normalCoef",size:1,type:c},{name:"a_radiusCoef",size:1,type:c}],CONSTANT_DATA:[[0,1,0],[0,-1,0],[1,1,1],[1,1,1],[0,-1,0],[1,-1,-1]]})},t.prototype.processVisibleItem=function(e,t,r,i,n){var o=n.size||1,a=r.x,s=r.y,h=i.x,d=i.y,c=(0,l.floatColor)(n.color),u=h-a,f=d-s,p=i.size||1,g=u*u+f*f,v=0,m=0;g&&(v=-f*(g=1/Math.sqrt(g))*o,m=u*g*o);var y=this.array;y[t++]=a,y[t++]=s,y[t++]=h,y[t++]=d,y[t++]=v,y[t++]=m,y[t++]=c,y[t++]=e,y[t++]=p},t}(s.default);t.default=u},118:function(e,t,r){"use strict";var i,n=this&&this.__extends||(i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},i(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var a=r(797),s=r(229),h=o(r(666)),l=o(r(755)),d=WebGLRenderingContext.UNSIGNED_BYTE,c=WebGLRenderingContext.FLOAT,u=["u_matrix","u_zoomRatio","u_sizeRatio","u_correctionRatio"],f=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.getDefinition=function(){return{VERTICES:6,VERTEX_SHADER_SOURCE:h.default,FRAGMENT_SHADER_SOURCE:l.default,METHOD:WebGLRenderingContext.TRIANGLES,UNIFORMS:u,ATTRIBUTES:[{name:"a_positionStart",size:2,type:c},{name:"a_positionEnd",size:2,type:c},{name:"a_normal",size:2,type:c},{name:"a_color",size:4,type:d,normalized:!0},{name:"a_id",size:4,type:d,normalized:!0}],CONSTANT_ATTRIBUTES:[{name:"a_positionCoef",size:1,type:c},{name:"a_normalCoef",size:1,type:c}],CONSTANT_DATA:[[0,1],[0,-1],[1,1],[1,1],[0,-1],[1,-1]]}},t.prototype.processVisibleItem=function(e,t,r,i,n){var o=n.size||1,s=r.x,h=r.y,l=i.x,d=i.y,c=(0,a.floatColor)(n.color),u=l-s,f=d-h,p=u*u+f*f,g=0,v=0;p&&(g=-f*(p=1/Math.sqrt(p))*o,v=u*p*o);var m=this.array;m[t++]=s,m[t++]=h,m[t++]=l,m[t++]=d,m[t++]=g,m[t++]=v,m[t++]=c,m[t++]=e},t.prototype.setUniforms=function(e,t){var r=t.gl,i=t.uniformLocations,n=i.u_matrix,o=i.u_zoomRatio,a=i.u_correctionRatio,s=i.u_sizeRatio;r.uniformMatrix3fv(n,!1,e.matrix),r.uniform1f(o,e.zoomRatio),r.uniform1f(s,e.sizeRatio),r.uniform1f(a,e.correctionRatio)},t}(s.EdgeProgram);t.default=f},56:function(e,t,r){"use strict";var i,n=this&&this.__extends||(i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},i(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var a=r(797),s=r(61),h=o(r(185)),l=o(r(669)),d=WebGLRenderingContext.UNSIGNED_BYTE,c=WebGLRenderingContext.FLOAT,u=["u_sizeRatio","u_pixelRatio","u_matrix"],f=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.getDefinition=function(){return{VERTICES:1,VERTEX_SHADER_SOURCE:h.default,FRAGMENT_SHADER_SOURCE:l.default,METHOD:WebGLRenderingContext.POINTS,UNIFORMS:u,ATTRIBUTES:[{name:"a_position",size:2,type:c},{name:"a_size",size:1,type:c},{name:"a_color",size:4,type:d,normalized:!0},{name:"a_id",size:4,type:d,normalized:!0}]}},t.prototype.processVisibleItem=function(e,t,r){var i=this.array;i[t++]=r.x,i[t++]=r.y,i[t++]=r.size,i[t++]=(0,a.floatColor)(r.color),i[t++]=e},t.prototype.setUniforms=function(e,t){var r=e.sizeRatio,i=e.pixelRatio,n=e.matrix,o=t.gl,a=t.uniformLocations,s=a.u_sizeRatio,h=a.u_pixelRatio,l=a.u_matrix;o.uniform1f(h,i),o.uniform1f(s,r),o.uniformMatrix3fv(l,!1,n)},t}(s.NodeProgram);t.default=f},63:(e,t)=>{"use strict";function r(e,t,r){var i="VERTEX"===e?t.VERTEX_SHADER:t.FRAGMENT_SHADER,n=t.createShader(i);if(null===n)throw new Error("loadShader: error while creating the shader");if(t.shaderSource(n,r),t.compileShader(n),!t.getShaderParameter(n,t.COMPILE_STATUS)){var o=t.getShaderInfoLog(n);throw t.deleteShader(n),new Error("loadShader: error while compiling the shader:\n".concat(o,"\n").concat(r))}return n}Object.defineProperty(t,"__esModule",{value:!0}),t.loadProgram=t.loadFragmentShader=t.loadVertexShader=void 0,t.loadVertexShader=function(e,t){return r("VERTEX",e,t)},t.loadFragmentShader=function(e,t){return r("FRAGMENT",e,t)},t.loadProgram=function(e,t){var r,i,n=e.createProgram();if(null===n)throw new Error("loadProgram: error while creating the program.");for(r=0,i=t.length;r<i;r++)e.attachShader(n,t[r]);if(e.linkProgram(n),!e.getProgramParameter(n,e.LINK_STATUS))throw e.deleteProgram(n),new Error("loadProgram: error while linking the program.");return n}},231:function(e,t,r){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.resolveSettings=t.validateSettings=t.DEFAULT_EDGE_PROGRAM_CLASSES=t.DEFAULT_NODE_PROGRAM_CLASSES=t.DEFAULT_SETTINGS=void 0;var n=r(797),o=i(r(56)),a=i(r(118)),s=i(r(191)),h=r(109),l=r(787),d=r(66);t.DEFAULT_SETTINGS={hideEdgesOnMove:!1,hideLabelsOnMove:!1,renderLabels:!0,renderEdgeLabels:!1,enableEdgeEvents:!1,defaultNodeColor:"#999",defaultNodeType:"circle",defaultEdgeColor:"#ccc",defaultEdgeType:"line",labelFont:"Arial",labelSize:14,labelWeight:"normal",labelColor:{color:"#000"},edgeLabelFont:"Arial",edgeLabelSize:14,edgeLabelWeight:"normal",edgeLabelColor:{attribute:"color"},stagePadding:30,zoomToSizeRatioFunction:Math.sqrt,itemSizesReference:"screen",defaultDrawEdgeLabel:h.drawStraightEdgeLabel,defaultDrawNodeLabel:l.drawDiscNodeLabel,defaultDrawNodeHover:d.drawDiscNodeHover,labelDensity:1,labelGridCellSize:100,labelRenderedSizeThreshold:6,nodeReducer:null,edgeReducer:null,zIndex:!1,minCameraRatio:null,maxCameraRatio:null,allowInvalidContainer:!1,nodeProgramClasses:{},nodeHoverProgramClasses:{},edgeProgramClasses:{}},t.DEFAULT_NODE_PROGRAM_CLASSES={circle:o.default},t.DEFAULT_EDGE_PROGRAM_CLASSES={arrow:s.default,line:a.default},t.validateSettings=function(e){if("number"!=typeof e.labelDensity||e.labelDensity<0)throw new Error("Settings: invalid `labelDensity`. Expecting a positive number.");var t=e.minCameraRatio,r=e.maxCameraRatio;if("number"==typeof t&&"number"==typeof r&&r<t)throw new Error("Settings: invalid camera ratio boundaries. Expecting `maxCameraRatio` to be greater than `minCameraRatio`.")},t.resolveSettings=function(e){var r=(0,n.assign)({},t.DEFAULT_SETTINGS,e);return r.nodeProgramClasses=(0,n.assign)({},t.DEFAULT_NODE_PROGRAM_CLASSES,r.nodeProgramClasses),r.edgeProgramClasses=(0,n.assign)({},t.DEFAULT_EDGE_PROGRAM_CLASSES,r.edgeProgramClasses),r}},303:function(e,t,r){"use strict";var i,n=this&&this.__extends||(i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},i(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=this&&this.__assign||function(){return o=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},o.apply(this,arguments)},a=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var i,n,o=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(i=o.next()).done;)a.push(i.value)}catch(e){n={error:e}}finally{try{i&&!i.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}return a},s=this&&this.__spreadArray||function(e,t,r){if(r||2===arguments.length)for(var i,n=0,o=t.length;n<o;n++)!i&&n in t||(i||(i=Array.prototype.slice.call(t,0,n)),i[n]=t[n]);return e.concat(i||Array.prototype.slice.call(t))},h=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var l=h(r(389)),d=h(r(700)),c=r(173),u=r(797),f=r(723),p=r(231),g=h(r(792)),v=r(572),m=r(774),y=r(883),b=function(e){function t(t,r,i){void 0===i&&(i={});var n=e.call(this)||this;if(n.elements={},n.canvasContexts={},n.webGLContexts={},n.pickingLayers=new Set,n.textures={},n.frameBuffers={},n.activeListeners={},n.labelGrid=new f.LabelGrid,n.nodeDataCache={},n.edgeDataCache={},n.nodeProgramIndex={},n.edgeProgramIndex={},n.nodesWithForcedLabels=new Set,n.edgesWithForcedLabels=new Set,n.nodeExtent={x:[0,1],y:[0,1]},n.nodeZExtent=[1/0,-1/0],n.edgeZExtent=[1/0,-1/0],n.matrix=(0,v.identity)(),n.invMatrix=(0,v.identity)(),n.correctionRatio=1,n.customBBox=null,n.normalizationFunction=(0,u.createNormalizationFunction)({x:[0,1],y:[0,1]}),n.graphToViewportRatio=1,n.itemIDsIndex={},n.nodeIndices={},n.edgeIndices={},n.width=0,n.height=0,n.pixelRatio=(0,u.getPixelRatio)(),n.pickingDownSizingRatio=2*n.pixelRatio,n.displayedNodeLabels=new Set,n.displayedEdgeLabels=new Set,n.highlightedNodes=new Set,n.hoveredNode=null,n.hoveredEdge=null,n.renderFrame=null,n.renderHighlightedNodesFrame=null,n.needToProcess=!1,n.checkEdgesEventsFrame=null,n.nodePrograms={},n.nodeHoverPrograms={},n.edgePrograms={},n.settings=(0,p.resolveSettings)(i),(0,p.validateSettings)(n.settings),(0,u.validateGraph)(t),!(r instanceof HTMLElement))throw new Error("Sigma: container should be an html element.");for(var o in n.graph=t,n.container=r,n.createWebGLContext("edges",{picking:i.enableEdgeEvents}),n.createCanvasContext("edgeLabels"),n.createWebGLContext("nodes",{picking:!0}),n.createCanvasContext("labels"),n.createCanvasContext("hovers"),n.createWebGLContext("hoverNodes"),n.createCanvasContext("mouse"),n.resize(),n.settings.nodeProgramClasses){var a=n.settings.nodeProgramClasses[o];n.nodePrograms[o]=new a(n.webGLContexts.nodes,n.frameBuffers.nodes,n);var s=a;o in n.settings.nodeHoverProgramClasses&&(s=n.settings.nodeHoverProgramClasses[o]),n.nodeHoverPrograms[o]=new s(n.webGLContexts.hoverNodes,null,n)}for(var o in n.settings.edgeProgramClasses){var h=n.settings.edgeProgramClasses[o];n.edgePrograms[o]=new h(n.webGLContexts.edges,n.frameBuffers.edges,n)}return n.camera=new l.default,n.bindCameraHandlers(),n.mouseCaptor=new d.default(n.elements.mouse,n),n.touchCaptor=new g.default(n.elements.mouse,n),n.bindEventHandlers(),n.bindGraphHandlers(),n.handleSettingsUpdate(),n.refresh(),n}return n(t,e),t.prototype.createCanvas=function(e){var t=(0,u.createElement)("canvas",{position:"absolute"},{class:"sigma-".concat(e)});return this.elements[e]=t,this.container.appendChild(t),t},t.prototype.createCanvasContext=function(e){var t=this.createCanvas(e);return this.canvasContexts[e]=t.getContext("2d",{preserveDrawingBuffer:!1,antialias:!1}),this},t.prototype.createWebGLContext=function(e,t){var r=this.createCanvas(e);(null==t?void 0:t.hidden)&&r.remove();var i,n=o({preserveDrawingBuffer:!1,antialias:!1},t||{});(i=r.getContext("webgl2",n))||(i=r.getContext("webgl",n)),i||(i=r.getContext("experimental-webgl",n));var a=i;if(this.webGLContexts[e]=a,a.blendFunc(a.ONE,a.ONE_MINUS_SRC_ALPHA),null==t?void 0:t.picking){this.pickingLayers.add(e);var s=a.createFramebuffer();if(!s)throw new Error("Sigma: cannot create a new frame buffer for layer ".concat(e));this.frameBuffers[e]=s}return this},t.prototype.resetWebGLTexture=function(e){var t=this.webGLContexts[e],r=this.frameBuffers[e],i=this.textures[e];i&&t.deleteTexture(i);var n=t.createTexture();return t.bindFramebuffer(t.FRAMEBUFFER,r),t.bindTexture(t.TEXTURE_2D,n),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,this.width,this.height,0,t.RGBA,t.UNSIGNED_BYTE,null),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,n,0),this.textures[e]=n,this},t.prototype.bindCameraHandlers=function(){var e=this;return this.activeListeners.camera=function(){e.scheduleRender()},this.camera.on("updated",this.activeListeners.camera),this},t.prototype.unbindCameraHandlers=function(){return this.camera.removeListener("updated",this.activeListeners.camera),this},t.prototype.getNodeAtPosition=function(e){var t=e.x,r=e.y,i=(0,y.getPixelColor)(this.webGLContexts.nodes,this.frameBuffers.nodes,t,r,this.pixelRatio,this.pickingDownSizingRatio),n=u.colorToIndex.apply(void 0,s([],a(i),!1)),o=this.itemIDsIndex[n];return o&&"node"===o.type?o.id:null},t.prototype.bindEventHandlers=function(){var e=this;this.activeListeners.handleResize=function(){e.scheduleRefresh()},window.addEventListener("resize",this.activeListeners.handleResize),this.activeListeners.handleMove=function(t){var r={event:t,preventSigmaDefault:function(){t.preventSigmaDefault()}},i=e.getNodeAtPosition(t);if(i&&e.hoveredNode!==i&&!e.nodeDataCache[i].hidden)return e.hoveredNode&&e.emit("leaveNode",o(o({},r),{node:e.hoveredNode})),e.hoveredNode=i,e.emit("enterNode",o(o({},r),{node:i})),void e.scheduleHighlightedNodesRender();if(e.hoveredNode&&e.getNodeAtPosition(t)!==e.hoveredNode){var n=e.hoveredNode;return e.hoveredNode=null,e.emit("leaveNode",o(o({},r),{node:n})),void e.scheduleHighlightedNodesRender()}e.settings.enableEdgeEvents&&e.checkEdgeHoverEvents(r)};var t=function(t){return function(r){var i={event:r,preventSigmaDefault:function(){r.preventSigmaDefault()}},n=r.original.isFakeSigmaMouseEvent?e.getNodeAtPosition(r):e.hoveredNode;if(n)return e.emit("".concat(t,"Node"),o(o({},i),{node:n}));if(e.settings.enableEdgeEvents){var a=e.getEdgeAtPoint(r.x,r.y);if(a)return e.emit("".concat(t,"Edge"),o(o({},i),{edge:a}))}return e.emit("".concat(t,"Stage"),i)}};return this.activeListeners.handleClick=t("click"),this.activeListeners.handleRightClick=t("rightClick"),this.activeListeners.handleDoubleClick=t("doubleClick"),this.activeListeners.handleWheel=t("wheel"),this.activeListeners.handleDown=t("down"),this.mouseCaptor.on("mousemove",this.activeListeners.handleMove),this.mouseCaptor.on("click",this.activeListeners.handleClick),this.mouseCaptor.on("rightClick",this.activeListeners.handleRightClick),this.mouseCaptor.on("doubleClick",this.activeListeners.handleDoubleClick),this.mouseCaptor.on("wheel",this.activeListeners.handleWheel),this.mouseCaptor.on("mousedown",this.activeListeners.handleDown),this},t.prototype.bindGraphHandlers=function(){var e=this,t=this.graph,r=new Set(["x","y","zIndex","type"]);return this.activeListeners.eachNodeAttributesUpdatedGraphUpdate=function(i){var n,o=null===(n=i.hints)||void 0===n?void 0:n.attributes;e.graph.forEachNode((function(t){return e.updateNode(t)}));var a=!o||o.some((function(e){return r.has(e)}));e.refresh({partialGraph:{nodes:t.nodes()},skipIndexation:!a,schedule:!0})},this.activeListeners.eachEdgeAttributesUpdatedGraphUpdate=function(r){var i,n=null===(i=r.hints)||void 0===i?void 0:i.attributes;e.graph.forEachEdge((function(t){return e.updateEdge(t)}));var o=n&&["zIndex","type"].some((function(e){return null==n?void 0:n.includes(e)}));e.refresh({partialGraph:{edges:t.edges()},skipIndexation:!o,schedule:!0})},this.activeListeners.addNodeGraphUpdate=function(t){var r=t.key;e.addNode(r),e.refresh({partialGraph:{nodes:[r]},skipIndexation:!1,schedule:!0})},this.activeListeners.updateNodeGraphUpdate=function(t){var r=t.key;e.refresh({partialGraph:{nodes:[r]},skipIndexation:!1,schedule:!0})},this.activeListeners.dropNodeGraphUpdate=function(t){var r=t.key;e.removeNode(r),e.refresh({schedule:!0})},this.activeListeners.addEdgeGraphUpdate=function(t){var r=t.key;e.addEdge(r),e.refresh({partialGraph:{edges:[r]},schedule:!0})},this.activeListeners.updateEdgeGraphUpdate=function(t){var r=t.key;e.refresh({partialGraph:{edges:[r]},skipIndexation:!1,schedule:!0})},this.activeListeners.dropEdgeGraphUpdate=function(t){var r=t.key;e.removeEdge(r),e.refresh({schedule:!0})},this.activeListeners.clearEdgesGraphUpdate=function(){e.clearEdgeState(),e.clearEdgeIndices(),e.refresh({schedule:!0})},this.activeListeners.clearGraphUpdate=function(){e.clearEdgeState(),e.clearNodeState(),e.clearEdgeIndices(),e.clearNodeIndices(),e.refresh({schedule:!0})},t.on("nodeAdded",this.activeListeners.addNodeGraphUpdate),t.on("nodeDropped",this.activeListeners.dropNodeGraphUpdate),t.on("nodeAttributesUpdated",this.activeListeners.updateNodeGraphUpdate),t.on("eachNodeAttributesUpdated",this.activeListeners.eachNodeAttributesUpdatedGraphUpdate),t.on("edgeAdded",this.activeListeners.addEdgeGraphUpdate),t.on("edgeDropped",this.activeListeners.dropEdgeGraphUpdate),t.on("edgeAttributesUpdated",this.activeListeners.updateEdgeGraphUpdate),t.on("eachEdgeAttributesUpdated",this.activeListeners.eachEdgeAttributesUpdatedGraphUpdate),t.on("edgesCleared",this.activeListeners.clearEdgesGraphUpdate),t.on("cleared",this.activeListeners.clearGraphUpdate),this},t.prototype.unbindGraphHandlers=function(){var e=this.graph;e.removeListener("nodeAdded",this.activeListeners.addNodeGraphUpdate),e.removeListener("nodeDropped",this.activeListeners.dropNodeGraphUpdate),e.removeListener("nodeAttributesUpdated",this.activeListeners.updateNodeGraphUpdate),e.removeListener("eachNodeAttributesUpdated",this.activeListeners.eachNodeAttributesUpdatedGraphUpdate),e.removeListener("edgeAdded",this.activeListeners.addEdgeGraphUpdate),e.removeListener("edgeDropped",this.activeListeners.dropEdgeGraphUpdate),e.removeListener("edgeAttributesUpdated",this.activeListeners.updateEdgeGraphUpdate),e.removeListener("eachEdgeAttributesUpdated",this.activeListeners.eachEdgeAttributesUpdatedGraphUpdate),e.removeListener("edgesCleared",this.activeListeners.clearEdgesGraphUpdate),e.removeListener("cleared",this.activeListeners.clearGraphUpdate)},t.prototype.checkEdgeHoverEvents=function(e){var t=this.hoveredNode?null:this.getEdgeAtPoint(e.event.x,e.event.y);return t!==this.hoveredEdge&&(this.hoveredEdge&&this.emit("leaveEdge",o(o({},e),{edge:this.hoveredEdge})),t&&this.emit("enterEdge",o(o({},e),{edge:t})),this.hoveredEdge=t),this},t.prototype.getEdgeAtPoint=function(e,t){var r=(0,y.getPixelColor)(this.webGLContexts.edges,this.frameBuffers.edges,e,t,this.pixelRatio,this.pickingDownSizingRatio),i=u.colorToIndex.apply(void 0,s([],a(r),!1)),n=this.itemIDsIndex[i];return n&&"edge"===n.type?n.id:null},t.prototype.process=function(){var e=this,t=this.graph,r=this.settings,i=this.getDimensions();this.nodeExtent=(0,u.graphExtent)(this.graph),this.normalizationFunction=(0,u.createNormalizationFunction)(this.customBBox||this.nodeExtent);var n=new l.default,o=(0,u.matrixFromCamera)(n.getState(),i,this.getGraphDimensions(),this.getSetting("stagePadding")||0);this.labelGrid.resizeAndClear(i,r.labelGridCellSize);for(var a={},s={},h={},d={},c=1,f=t.nodes(),p=0,g=f.length;p<g;p++){var v=f[p],m=this.nodeDataCache[v],y=t.getNodeAttributes(v);m.x=y.x,m.y=y.y,this.normalizationFunction.applyTo(m),"string"!=typeof m.label||m.hidden||this.labelGrid.add(v,m.size,this.framedGraphToViewport(m,{matrix:o})),a[m.type]=(a[m.type]||0)+1}for(var b in this.labelGrid.organize(),this.nodePrograms){if(!this.nodePrograms.hasOwnProperty(b))throw new Error('Sigma: could not find a suitable program for node type "'.concat(b,'"!'));this.nodePrograms[b].reallocate(a[b]||0),a[b]=0}for(this.settings.zIndex&&this.nodeZExtent[0]!==this.nodeZExtent[1]&&(f=(0,u.zIndexOrdering)(this.nodeZExtent,(function(t){return e.nodeDataCache[t].zIndex}),f)),p=0,g=f.length;p<g;p++)s[v=f[p]]=c,d[s[v]]={type:"node",id:v},c++,m=this.nodeDataCache[v],this.addNodeToProgram(v,s[v],a[m.type]++);var _={},E=t.edges();for(p=0,g=E.length;p<g;p++){var x=E[p];_[(m=this.edgeDataCache[x]).type]=(_[m.type]||0)+1}for(var b in this.settings.zIndex&&this.edgeZExtent[0]!==this.edgeZExtent[1]&&(E=(0,u.zIndexOrdering)(this.edgeZExtent,(function(t){return e.edgeDataCache[t].zIndex}),E)),this.edgePrograms){if(!this.edgePrograms.hasOwnProperty(b))throw new Error('Sigma: could not find a suitable program for edge type "'.concat(b,'"!'));this.edgePrograms[b].reallocate(_[b]||0),_[b]=0}for(p=0,g=E.length;p<g;p++)h[x=E[p]]=c,d[h[x]]={type:"edge",id:x},c++,m=this.edgeDataCache[x],this.addEdgeToProgram(x,h[x],_[m.type]++);return this.itemIDsIndex=d,this.nodeIndices=s,this.edgeIndices=h,this},t.prototype.handleSettingsUpdate=function(){return this.camera.minRatio=this.settings.minCameraRatio,this.camera.maxRatio=this.settings.maxCameraRatio,this.camera.setState(this.camera.validateState(this.camera.getState())),this},t.prototype.renderLabels=function(){if(!this.settings.renderLabels)return this;var e=this.camera.getState(),t=this.labelGrid.getLabelsToDisplay(e.ratio,this.settings.labelDensity);(0,m.extend)(t,this.nodesWithForcedLabels),this.displayedNodeLabels=new Set;for(var r=this.canvasContexts.labels,i=0,n=t.length;i<n;i++){var a=t[i],s=this.nodeDataCache[a];if(!this.displayedNodeLabels.has(a)&&!s.hidden){var h=this.framedGraphToViewport(s),l=h.x,d=h.y,c=this.scaleSize(s.size);if((s.forceLabel||!(c<this.settings.labelRenderedSizeThreshold))&&!(l<-150||l>this.width+150||d<-50||d>this.height+50)){this.displayedNodeLabels.add(a);var u=this.settings,f=u.nodeProgramClasses,p=u.defaultDrawNodeLabel;(f[s.type].drawLabel||p)(r,o(o({key:a},s),{size:c,x:l,y:d}),this.settings)}}}return this},t.prototype.renderEdgeLabels=function(){if(!this.settings.renderEdgeLabels)return this;var e=this.canvasContexts.edgeLabels;e.clearRect(0,0,this.width,this.height);var t=(0,f.edgeLabelsToDisplayFromNodes)({graph:this.graph,hoveredNode:this.hoveredNode,displayedNodeLabels:this.displayedNodeLabels,highlightedNodes:this.highlightedNodes});(0,m.extend)(t,this.edgesWithForcedLabels);for(var r=new Set,i=0,n=t.length;i<n;i++){var a=t[i],s=this.graph.extremities(a),h=this.nodeDataCache[s[0]],l=this.nodeDataCache[s[1]],d=this.edgeDataCache[a];if(!r.has(a)&&!(d.hidden||h.hidden||l.hidden)){var c=this.settings,u=c.edgeProgramClasses,p=c.defaultDrawEdgeLabel;(u[d.type].drawLabel||p)(e,o(o({key:a},d),{size:this.scaleSize(d.size)}),o(o(o({key:s[0]},h),this.framedGraphToViewport(h)),{size:this.scaleSize(h.size)}),o(o(o({key:s[1]},l),this.framedGraphToViewport(l)),{size:this.scaleSize(l.size)}),this.settings),r.add(a)}}return this.displayedEdgeLabels=r,this},t.prototype.renderHighlightedNodes=function(){var e=this,t=this.canvasContexts.hovers;t.clearRect(0,0,this.width,this.height);var r=[];this.hoveredNode&&!this.nodeDataCache[this.hoveredNode].hidden&&r.push(this.hoveredNode),this.highlightedNodes.forEach((function(t){t!==e.hoveredNode&&r.push(t)})),r.forEach((function(r){return function(r){var i=e.nodeDataCache[r],n=e.framedGraphToViewport(i),a=n.x,s=n.y,h=e.scaleSize(i.size),l=e.settings,d=l.nodeProgramClasses,c=l.defaultDrawNodeHover;(d[i.type].drawHover||c)(t,o(o({key:r},i),{size:h,x:a,y:s}),e.settings)}(r)}));var i={};for(var n in r.forEach((function(t){var r=e.nodeDataCache[t].type;i[r]=(i[r]||0)+1})),this.nodeHoverPrograms)this.nodeHoverPrograms[n].reallocate(i[n]||0),i[n]=0;for(var n in r.forEach((function(t){var r=e.nodeDataCache[t];e.nodeHoverPrograms[r.type].process(0,i[r.type]++,r)})),this.webGLContexts.hoverNodes.clear(this.webGLContexts.hoverNodes.COLOR_BUFFER_BIT),this.nodeHoverPrograms)this.nodeHoverPrograms[n].render({matrix:this.matrix,width:this.width,height:this.height,pixelRatio:this.pixelRatio,cameraAngle:this.camera.angle,zoomRatio:this.camera.ratio,sizeRatio:1/this.scaleSize(),correctionRatio:this.correctionRatio,downSizingRatio:this.pickingDownSizingRatio})},t.prototype.scheduleHighlightedNodesRender=function(){var e=this;this.renderHighlightedNodesFrame||this.renderFrame||(this.renderHighlightedNodesFrame=(0,u.requestFrame)((function(){e.renderHighlightedNodesFrame=null,e.renderHighlightedNodes(),e.renderEdgeLabels()})))},t.prototype.render=function(){var e=this;this.emit("beforeRender");var t=function(){return e.emit("afterRender"),e};if(this.renderFrame&&((0,u.cancelFrame)(this.renderFrame),this.renderFrame=null),this.resize(),this.needToProcess&&this.process(),this.needToProcess=!1,this.clear(),this.pickingLayers.forEach((function(t){return e.resetWebGLTexture(t)})),!this.graph.order)return t();var r=this.mouseCaptor,i=this.camera.isAnimated()||r.isMoving||r.draggedEvents||r.currentWheelDirection,n=this.camera.getState(),o=this.getDimensions(),a=this.getGraphDimensions(),s=this.getSetting("stagePadding")||0;this.matrix=(0,u.matrixFromCamera)(n,o,a,s),this.invMatrix=(0,u.matrixFromCamera)(n,o,a,s,!0),this.correctionRatio=(0,u.getMatrixImpact)(this.matrix,n,o),this.graphToViewportRatio=this.getGraphToViewportRatio();var h={matrix:this.matrix,width:this.width,height:this.height,pixelRatio:this.pixelRatio,zoomRatio:this.camera.ratio,cameraAngle:this.camera.angle,sizeRatio:1/this.scaleSize(),correctionRatio:this.correctionRatio,downSizingRatio:this.pickingDownSizingRatio};for(var l in this.nodePrograms)this.nodePrograms[l].render(h);if(!this.settings.hideEdgesOnMove||!i)for(var l in this.edgePrograms)this.edgePrograms[l].render(h);return this.settings.hideLabelsOnMove&&i||(this.renderLabels(),this.renderEdgeLabels(),this.renderHighlightedNodes()),t()},t.prototype.addNode=function(e){var t=Object.assign({},this.graph.getNodeAttributes(e));this.settings.nodeReducer&&(t=this.settings.nodeReducer(e,t));var r=function(e,t,r){if(!r.hasOwnProperty("x")||!r.hasOwnProperty("y"))throw new Error('Sigma: could not find a valid position (x, y) for node "'.concat(t,'". All your nodes must have a number "x" and "y". Maybe your forgot to apply a layout or your "nodeReducer" is not returning the correct data?'));return r.color||(r.color=e.defaultNodeColor),r.label||""===r.label||(r.label=null),void 0!==r.label&&null!==r.label?r.label=""+r.label:r.label=null,r.size||(r.size=2),r.hasOwnProperty("hidden")||(r.hidden=!1),r.hasOwnProperty("highlighted")||(r.highlighted=!1),r.hasOwnProperty("forceLabel")||(r.forceLabel=!1),r.type&&""!==r.type||(r.type=e.defaultNodeType),r.zIndex||(r.zIndex=0),r}(this.settings,e,t);this.nodeDataCache[e]=r,this.nodesWithForcedLabels.delete(e),r.forceLabel&&!r.hidden&&this.nodesWithForcedLabels.add(e),this.highlightedNodes.delete(e),r.highlighted&&!r.hidden&&this.highlightedNodes.add(e),this.settings.zIndex&&(r.zIndex<this.nodeZExtent[0]&&(this.nodeZExtent[0]=r.zIndex),r.zIndex>this.nodeZExtent[1]&&(this.nodeZExtent[1]=r.zIndex))},t.prototype.updateNode=function(e){this.addNode(e);var t=this.nodeDataCache[e];this.normalizationFunction.applyTo(t)},t.prototype.removeNode=function(e){delete this.nodeDataCache[e],delete this.nodeProgramIndex[e],this.highlightedNodes.delete(e),this.hoveredNode===e&&(this.hoveredNode=null),this.nodesWithForcedLabels.delete(e)},t.prototype.addEdge=function(e){var t=Object.assign({},this.graph.getEdgeAttributes(e));this.settings.edgeReducer&&(t=this.settings.edgeReducer(e,t));var r=function(e,t,r){return r.color||(r.color=e.defaultEdgeColor),r.label||(r.label=""),r.size||(r.size=.5),r.hasOwnProperty("hidden")||(r.hidden=!1),r.hasOwnProperty("forceLabel")||(r.forceLabel=!1),r.type&&""!==r.type||(r.type=e.defaultEdgeType),r.zIndex||(r.zIndex=0),r}(this.settings,0,t);this.edgeDataCache[e]=r,this.edgesWithForcedLabels.delete(e),r.forceLabel&&!r.hidden&&this.edgesWithForcedLabels.add(e),this.settings.zIndex&&(r.zIndex<this.edgeZExtent[0]&&(this.edgeZExtent[0]=r.zIndex),r.zIndex>this.edgeZExtent[1]&&(this.edgeZExtent[1]=r.zIndex))},t.prototype.updateEdge=function(e){this.addEdge(e)},t.prototype.removeEdge=function(e){delete this.edgeDataCache[e],delete this.edgeProgramIndex[e],this.hoveredEdge===e&&(this.hoveredEdge=null),this.edgesWithForcedLabels.delete(e)},t.prototype.clearNodeIndices=function(){this.labelGrid=new f.LabelGrid,this.nodeExtent={x:[0,1],y:[0,1]},this.nodeDataCache={},this.edgeProgramIndex={},this.nodesWithForcedLabels=new Set,this.nodeZExtent=[1/0,-1/0]},t.prototype.clearEdgeIndices=function(){this.edgeDataCache={},this.edgeProgramIndex={},this.edgesWithForcedLabels=new Set,this.edgeZExtent=[1/0,-1/0]},t.prototype.clearIndices=function(){this.clearEdgeIndices(),this.clearNodeIndices()},t.prototype.clearNodeState=function(){this.displayedNodeLabels=new Set,this.highlightedNodes=new Set,this.hoveredNode=null},t.prototype.clearEdgeState=function(){this.displayedEdgeLabels=new Set,this.highlightedNodes=new Set,this.hoveredEdge=null},t.prototype.clearState=function(){this.clearEdgeState(),this.clearNodeState()},t.prototype.addNodeToProgram=function(e,t,r){var i=this.nodeDataCache[e],n=this.nodePrograms[i.type];if(!n)throw new Error('Sigma: could not find a suitable program for node type "'.concat(i.type,'"!'));n.process(t,r,i),this.nodeProgramIndex[e]=r},t.prototype.addEdgeToProgram=function(e,t,r){var i=this.edgeDataCache[e],n=this.edgePrograms[i.type];if(!n)throw new Error('Sigma: could not find a suitable program for edge type "'.concat(i.type,'"!'));var o=this.graph.extremities(e),a=this.nodeDataCache[o[0]],s=this.nodeDataCache[o[1]];n.process(t,r,a,s,i),this.edgeProgramIndex[e]=r},t.prototype.getCamera=function(){return this.camera},t.prototype.setCamera=function(e){this.unbindCameraHandlers(),this.camera=e,this.bindCameraHandlers()},t.prototype.getContainer=function(){return this.container},t.prototype.getGraph=function(){return this.graph},t.prototype.setGraph=function(e){e!==this.graph&&(this.unbindGraphHandlers(),null!==this.checkEdgesEventsFrame&&((0,u.cancelFrame)(this.checkEdgesEventsFrame),this.checkEdgesEventsFrame=null),this.graph=e,this.bindGraphHandlers(),this.refresh())},t.prototype.getMouseCaptor=function(){return this.mouseCaptor},t.prototype.getTouchCaptor=function(){return this.touchCaptor},t.prototype.getDimensions=function(){return{width:this.width,height:this.height}},t.prototype.getGraphDimensions=function(){var e=this.customBBox||this.nodeExtent;return{width:e.x[1]-e.x[0]||1,height:e.y[1]-e.y[0]||1}},t.prototype.getNodeDisplayData=function(e){var t=this.nodeDataCache[e];return t?Object.assign({},t):void 0},t.prototype.getEdgeDisplayData=function(e){var t=this.edgeDataCache[e];return t?Object.assign({},t):void 0},t.prototype.getNodeDisplayedLabels=function(){return new Set(this.displayedNodeLabels)},t.prototype.getEdgeDisplayedLabels=function(){return new Set(this.displayedEdgeLabels)},t.prototype.getSettings=function(){return o({},this.settings)},t.prototype.getSetting=function(e){return this.settings[e]},t.prototype.setSetting=function(e,t){return this.settings[e]=t,(0,p.validateSettings)(this.settings),this.handleSettingsUpdate(),this.refresh(),this},t.prototype.updateSetting=function(e,t){return this.settings[e]=t(this.settings[e]),(0,p.validateSettings)(this.settings),this.handleSettingsUpdate(),this.scheduleRefresh(),this},t.prototype.resize=function(){var e=this.width,t=this.height;if(this.width=this.container.offsetWidth,this.height=this.container.offsetHeight,this.pixelRatio=(0,u.getPixelRatio)(),0===this.width){if(!this.settings.allowInvalidContainer)throw new Error("Sigma: Container has no width. You can set the allowInvalidContainer setting to true to stop seeing this error.");this.width=1}if(0===this.height){if(!this.settings.allowInvalidContainer)throw new Error("Sigma: Container has no height. You can set the allowInvalidContainer setting to true to stop seeing this error.");this.height=1}if(e===this.width&&t===this.height)return this;for(var r in this.emit("resize"),this.elements){var i=this.elements[r];i.style.width=this.width+"px",i.style.height=this.height+"px"}for(var r in this.canvasContexts)this.elements[r].setAttribute("width",this.width*this.pixelRatio+"px"),this.elements[r].setAttribute("height",this.height*this.pixelRatio+"px"),1!==this.pixelRatio&&this.canvasContexts[r].scale(this.pixelRatio,this.pixelRatio);for(var r in this.webGLContexts){this.elements[r].setAttribute("width",this.width*this.pixelRatio+"px"),this.elements[r].setAttribute("height",this.height*this.pixelRatio+"px");var n=this.webGLContexts[r];if(n.viewport(0,0,this.width*this.pixelRatio,this.height*this.pixelRatio),this.pickingLayers.has(r)){var o=this.textures[r];o&&n.deleteTexture(o)}}return this},t.prototype.clear=function(){return this.webGLContexts.nodes.bindFramebuffer(WebGLRenderingContext.FRAMEBUFFER,null),this.webGLContexts.nodes.clear(WebGLRenderingContext.COLOR_BUFFER_BIT),this.webGLContexts.edges.bindFramebuffer(WebGLRenderingContext.FRAMEBUFFER,null),this.webGLContexts.edges.clear(WebGLRenderingContext.COLOR_BUFFER_BIT),this.webGLContexts.hoverNodes.clear(WebGLRenderingContext.COLOR_BUFFER_BIT),this.canvasContexts.labels.clearRect(0,0,this.width,this.height),this.canvasContexts.hovers.clearRect(0,0,this.width,this.height),this.canvasContexts.edgeLabels.clearRect(0,0,this.width,this.height),this},t.prototype.refresh=function(e){var t,r,i=this,n=void 0!==(null==e?void 0:e.skipIndexation)&&(null==e?void 0:e.skipIndexation),o=void 0!==(null==e?void 0:e.schedule)&&e.schedule,a=!e||!e.partialGraph;if(a)this.clearEdgeIndices(),this.clearNodeIndices(),this.graph.forEachNode((function(e){return i.addNode(e)})),this.graph.forEachEdge((function(e){return i.addEdge(e)}));else{for(var s=(null===(t=e.partialGraph)||void 0===t?void 0:t.nodes)||[],h=0,l=(null==s?void 0:s.length)||0;h<l;h++){var d=s[h];if(this.updateNode(d),n){if(void 0===(f=this.nodeProgramIndex[d]))throw new Error('Sigma: node "'.concat(d,"\" can't be repaint"));this.addNodeToProgram(d,this.nodeIndices[d],f)}}var c=(null===(r=null==e?void 0:e.partialGraph)||void 0===r?void 0:r.edges)||[];for(h=0,l=c.length;h<l;h++){var u=c[h];if(this.updateEdge(u),n){var f;if(void 0===(f=this.edgeProgramIndex[u]))throw new Error('Sigma: edge "'.concat(u,"\" can't be repaint"));this.addEdgeToProgram(u,this.edgeIndices[u],f)}}}return!a&&n||(this.needToProcess=!0),o?this.scheduleRender():this.render(),this},t.prototype.scheduleRender=function(){var e=this;return this.renderFrame||(this.renderFrame=(0,u.requestFrame)((function(){e.render()}))),this},t.prototype.scheduleRefresh=function(e){return this.refresh(o(o({},e),{schedule:!0}))},t.prototype.getViewportZoomedState=function(e,t){var r=this.camera.getState(),i=r.ratio,n=r.angle,o=r.x,a=r.y,s=t/i,h={x:this.width/2,y:this.height/2},l=this.viewportToFramedGraph(e),d=this.viewportToFramedGraph(h);return{angle:n,x:(l.x-d.x)*(1-s)+o,y:(l.y-d.y)*(1-s)+a,ratio:t}},t.prototype.viewRectangle=function(){var e=0*this.width/8,t=0*this.height/8,r=this.viewportToFramedGraph({x:0-e,y:0-t}),i=this.viewportToFramedGraph({x:this.width+e,y:0-t}),n=this.viewportToFramedGraph({x:0,y:this.height+t});return{x1:r.x,y1:r.y,x2:i.x,y2:i.y,height:i.y-n.y}},t.prototype.framedGraphToViewport=function(e,t){void 0===t&&(t={});var r=!!t.cameraState||!!t.viewportDimensions||!!t.graphDimensions,i=t.matrix?t.matrix:r?(0,u.matrixFromCamera)(t.cameraState||this.camera.getState(),t.viewportDimensions||this.getDimensions(),t.graphDimensions||this.getGraphDimensions(),t.padding||this.getSetting("stagePadding")||0):this.matrix,n=(0,v.multiplyVec2)(i,e);return{x:(1+n.x)*this.width/2,y:(1-n.y)*this.height/2}},t.prototype.viewportToFramedGraph=function(e,t){void 0===t&&(t={});var r=!!t.cameraState||!!t.viewportDimensions||!t.graphDimensions,i=t.matrix?t.matrix:r?(0,u.matrixFromCamera)(t.cameraState||this.camera.getState(),t.viewportDimensions||this.getDimensions(),t.graphDimensions||this.getGraphDimensions(),t.padding||this.getSetting("stagePadding")||0,!0):this.invMatrix,n=(0,v.multiplyVec2)(i,{x:e.x/this.width*2-1,y:1-e.y/this.height*2});return isNaN(n.x)&&(n.x=0),isNaN(n.y)&&(n.y=0),n},t.prototype.viewportToGraph=function(e,t){return void 0===t&&(t={}),this.normalizationFunction.inverse(this.viewportToFramedGraph(e,t))},t.prototype.graphToViewport=function(e,t){return void 0===t&&(t={}),this.framedGraphToViewport(this.normalizationFunction(e),t)},t.prototype.getGraphToViewportRatio=function(){var e={x:0,y:0},t={x:1,y:1},r=Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2)),i=this.graphToViewport(e),n=this.graphToViewport(t);return Math.sqrt(Math.pow(i.x-n.x,2)+Math.pow(i.y-n.y,2))/r},t.prototype.getBBox=function(){return this.nodeExtent},t.prototype.getCustomBBox=function(){return this.customBBox},t.prototype.setCustomBBox=function(e){return this.customBBox=e,this.scheduleRender(),this},t.prototype.kill=function(){var e;for(var t in this.emit("kill"),this.removeAllListeners(),this.unbindCameraHandlers(),window.removeEventListener("resize",this.activeListeners.handleResize),this.mouseCaptor.kill(),this.touchCaptor.kill(),this.unbindGraphHandlers(),this.clearIndices(),this.clearState(),this.nodeDataCache={},this.edgeDataCache={},this.highlightedNodes.clear(),this.renderFrame&&((0,u.cancelFrame)(this.renderFrame),this.renderFrame=null),this.renderHighlightedNodesFrame&&((0,u.cancelFrame)(this.renderHighlightedNodesFrame),this.renderHighlightedNodesFrame=null),this.webGLContexts)null===(e=this.webGLContexts[t].getExtension("WEBGL_lose_context"))||void 0===e||e.loseContext();for(var r=this.container;r.firstChild;)r.removeChild(r.firstChild);for(var i in this.canvasContexts={},this.webGLContexts={},this.elements={},this.nodePrograms)this.nodePrograms[i].kill();for(var i in this.nodeHoverPrograms)this.nodeHoverPrograms[i].kill();for(var i in this.edgePrograms)this.edgePrograms[i].kill();this.nodePrograms={},this.nodeHoverPrograms={},this.edgePrograms={}},t.prototype.scaleSize=function(e,t){return void 0===e&&(e=1),void 0===t&&(t=this.camera.ratio),e/this.settings.zoomToSizeRatioFunction(t)*("positions"===this.getSetting("itemSizesReference")?t*this.graphToViewportRatio:1)},t.prototype.getCanvases=function(){return o({},this.elements)},t}(c.TypedEventEmitter);t.default=b},173:function(e,t,r){"use strict";var i,n=this&&this.__extends||(i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},i(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.TypedEventEmitter=void 0;var o=function(e){function t(){var t=e.call(this)||this;return t.rawEmitter=t,t}return n(t,e),t}(r(699).EventEmitter);t.TypedEventEmitter=o},778:function(e,t,r){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.animateNodes=t.ANIMATE_DEFAULTS=void 0;var n=r(797),o=i(r(856));t.ANIMATE_DEFAULTS={easing:"quadraticInOut",duration:150},t.animateNodes=function(e,r,i,a){var s=Object.assign({},t.ANIMATE_DEFAULTS,i),h="function"==typeof s.easing?s.easing:o.default[s.easing],l=Date.now(),d={};for(var c in r){var u=r[c];for(var f in d[c]={},u)d[c][f]=e.getNodeAttribute(c,f)}var p=null,g=function(){p=null;var t=(Date.now()-l)/s.duration;if(t>=1){for(var i in r){var o=r[i];for(var c in o)e.setNodeAttribute(i,c,o[c])}"function"==typeof a&&a()}else{for(var i in t=h(t),r){o=r[i];var u=d[i];for(var c in o)e.setNodeAttribute(i,c,o[c]*t+u[c]*(1-t))}p=(0,n.requestFrame)(g)}};return g(),function(){p&&(0,n.cancelFrame)(p)}}},774:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.extend=void 0,t.extend=function(e,t){var r=t.size;if(0!==r){var i=e.length;e.length+=r;var n=0;t.forEach((function(t){e[i+n]=t,n++}))}}},71:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.HTML_COLORS=void 0,t.HTML_COLORS={black:"#000000",silver:"#C0C0C0",gray:"#808080",grey:"#808080",white:"#FFFFFF",maroon:"#800000",red:"#FF0000",purple:"#800080",fuchsia:"#FF00FF",green:"#008000",lime:"#00FF00",olive:"#808000",yellow:"#FFFF00",navy:"#000080",blue:"#0000FF",teal:"#008080",aqua:"#00FFFF",darkblue:"#00008B",mediumblue:"#0000CD",darkgreen:"#006400",darkcyan:"#008B8B",deepskyblue:"#00BFFF",darkturquoise:"#00CED1",mediumspringgreen:"#00FA9A",springgreen:"#00FF7F",cyan:"#00FFFF",midnightblue:"#191970",dodgerblue:"#1E90FF",lightseagreen:"#20B2AA",forestgreen:"#228B22",seagreen:"#2E8B57",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",limegreen:"#32CD32",mediumseagreen:"#3CB371",turquoise:"#40E0D0",royalblue:"#4169E1",steelblue:"#4682B4",darkslateblue:"#483D8B",mediumturquoise:"#48D1CC",indigo:"#4B0082",darkolivegreen:"#556B2F",cadetblue:"#5F9EA0",cornflowerblue:"#6495ED",rebeccapurple:"#663399",mediumaquamarine:"#66CDAA",dimgray:"#696969",dimgrey:"#696969",slateblue:"#6A5ACD",olivedrab:"#6B8E23",slategray:"#708090",slategrey:"#708090",lightslategray:"#778899",lightslategrey:"#778899",mediumslateblue:"#7B68EE",lawngreen:"#7CFC00",chartreuse:"#7FFF00",aquamarine:"#7FFFD4",skyblue:"#87CEEB",lightskyblue:"#87CEFA",blueviolet:"#8A2BE2",darkred:"#8B0000",darkmagenta:"#8B008B",saddlebrown:"#8B4513",darkseagreen:"#8FBC8F",lightgreen:"#90EE90",mediumpurple:"#9370DB",darkviolet:"#9400D3",palegreen:"#98FB98",darkorchid:"#9932CC",yellowgreen:"#9ACD32",sienna:"#A0522D",brown:"#A52A2A",darkgray:"#A9A9A9",darkgrey:"#A9A9A9",lightblue:"#ADD8E6",greenyellow:"#ADFF2F",paleturquoise:"#AFEEEE",lightsteelblue:"#B0C4DE",powderblue:"#B0E0E6",firebrick:"#B22222",darkgoldenrod:"#B8860B",mediumorchid:"#BA55D3",rosybrown:"#BC8F8F",darkkhaki:"#BDB76B",mediumvioletred:"#C71585",indianred:"#CD5C5C",peru:"#CD853F",chocolate:"#D2691E",tan:"#D2B48C",lightgray:"#D3D3D3",lightgrey:"#D3D3D3",thistle:"#D8BFD8",orchid:"#DA70D6",goldenrod:"#DAA520",palevioletred:"#DB7093",crimson:"#DC143C",gainsboro:"#DCDCDC",plum:"#DDA0DD",burlywood:"#DEB887",lightcyan:"#E0FFFF",lavender:"#E6E6FA",darksalmon:"#E9967A",violet:"#EE82EE",palegoldenrod:"#EEE8AA",lightcoral:"#F08080",khaki:"#F0E68C",aliceblue:"#F0F8FF",honeydew:"#F0FFF0",azure:"#F0FFFF",sandybrown:"#F4A460",wheat:"#F5DEB3",beige:"#F5F5DC",whitesmoke:"#F5F5F5",mintcream:"#F5FFFA",ghostwhite:"#F8F8FF",salmon:"#FA8072",antiquewhite:"#FAEBD7",linen:"#FAF0E6",lightgoldenrodyellow:"#FAFAD2",oldlace:"#FDF5E6",magenta:"#FF00FF",deeppink:"#FF1493",orangered:"#FF4500",tomato:"#FF6347",hotpink:"#FF69B4",coral:"#FF7F50",darkorange:"#FF8C00",lightsalmon:"#FFA07A",orange:"#FFA500",lightpink:"#FFB6C1",pink:"#FFC0CB",gold:"#FFD700",peachpuff:"#FFDAB9",navajowhite:"#FFDEAD",moccasin:"#FFE4B5",bisque:"#FFE4C4",mistyrose:"#FFE4E1",blanchedalmond:"#FFEBCD",papayawhip:"#FFEFD5",lavenderblush:"#FFF0F5",seashell:"#FFF5EE",cornsilk:"#FFF8DC",lemonchiffon:"#FFFACD",floralwhite:"#FFFAF0",snow:"#FFFAFA",lightyellow:"#FFFFE0",ivory:"#FFFFF0"}},856:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.cubicInOut=t.cubicOut=t.cubicIn=t.quadraticInOut=t.quadraticOut=t.quadraticIn=t.linear=void 0,t.linear=function(e){return e},t.quadraticIn=function(e){return e*e},t.quadraticOut=function(e){return e*(2-e)},t.quadraticInOut=function(e){return(e*=2)<1?.5*e*e:-.5*(--e*(e-2)-1)},t.cubicIn=function(e){return e*e*e},t.cubicOut=function(e){return--e*e*e+1},t.cubicInOut=function(e){return(e*=2)<1?.5*e*e*e:.5*((e-=2)*e*e+2)};var r={linear:t.linear,quadraticIn:t.quadraticIn,quadraticOut:t.quadraticOut,quadraticInOut:t.quadraticInOut,cubicIn:t.cubicIn,cubicOut:t.cubicOut,cubicInOut:t.cubicInOut};t.default=r},797:function(e,t,r){"use strict";var i=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var i,n,o=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(i=o.next()).done;)a.push(i.value)}catch(e){n={error:e}}finally{try{i&&!i.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}return a},n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.validateGraph=t.extractPixel=t.getMatrixImpact=t.matrixFromCamera=t.getCorrectionRatio=t.colorToIndex=t.indexToColor=t.floatColor=t.rgbaToFloat=t.parseColor=t.zIndexOrdering=t.createNormalizationFunction=t.graphExtent=t.getPixelRatio=t.createElement=t.cancelFrame=t.requestFrame=t.assignDeep=t.assign=t.isPlainObject=void 0;var o=n(r(880)),a=r(572),s=r(71);function h(e){return"object"==typeof e&&null!==e&&e.constructor===Object}t.isPlainObject=h,t.assign=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];e=e||{};for(var i=0,n=t.length;i<n;i++){var o=t[i];o&&Object.assign(e,o)}return e},t.assignDeep=function e(t){for(var r=[],i=1;i<arguments.length;i++)r[i-1]=arguments[i];t=t||{};for(var n=0,o=r.length;n<o;n++){var a=r[n];if(a)for(var s in a)h(a[s])?t[s]=e(t[s],a[s]):t[s]=a[s]}return t},t.requestFrame="undefined"!=typeof requestAnimationFrame?function(e){return requestAnimationFrame(e)}:function(e){return setTimeout(e,0)},t.cancelFrame="undefined"!=typeof cancelAnimationFrame?function(e){return cancelAnimationFrame(e)}:function(e){return clearTimeout(e)},t.createElement=function(e,t,r){var i=document.createElement(e);if(t)for(var n in t)i.style[n]=t[n];if(r)for(var n in r)i.setAttribute(n,r[n]);return i},t.getPixelRatio=function(){return void 0!==window.devicePixelRatio?window.devicePixelRatio:1},t.graphExtent=function(e){if(!e.order)return{x:[0,1],y:[0,1]};var t=1/0,r=-1/0,i=1/0,n=-1/0;return e.forEachNode((function(e,o){var a=o.x,s=o.y;a<t&&(t=a),a>r&&(r=a),s<i&&(i=s),s>n&&(n=s)})),{x:[t,r],y:[i,n]}},t.createNormalizationFunction=function(e){var t=i(e.x,2),r=t[0],n=t[1],o=i(e.y,2),a=o[0],s=o[1],h=Math.max(n-r,s-a),l=(n+r)/2,d=(s+a)/2;(0===h||Math.abs(h)===1/0||isNaN(h))&&(h=1),isNaN(l)&&(l=0),isNaN(d)&&(d=0);var c=function(e){return{x:.5+(e.x-l)/h,y:.5+(e.y-d)/h}};return c.applyTo=function(e){e.x=.5+(e.x-l)/h,e.y=.5+(e.y-d)/h},c.inverse=function(e){return{x:l+h*(e.x-.5),y:d+h*(e.y-.5)}},c.ratio=h,c},t.zIndexOrdering=function(e,t,r){return r.sort((function(e,r){var i=t(e)||0,n=t(r)||0;return i<n?-1:i>n?1:0}))};var l=new Int8Array(4),d=new Int32Array(l.buffer,0,1),c=new Float32Array(l.buffer,0,1),u=/^\s*rgba?\s*\(/,f=/^\s*rgba?\s*\(\s*([0-9]*)\s*,\s*([0-9]*)\s*,\s*([0-9]*)(?:\s*,\s*(.*)?)?\)\s*$/;function p(e){var t=0,r=0,i=0,n=1;if("#"===e[0])4===e.length?(t=parseInt(e.charAt(1)+e.charAt(1),16),r=parseInt(e.charAt(2)+e.charAt(2),16),i=parseInt(e.charAt(3)+e.charAt(3),16)):(t=parseInt(e.charAt(1)+e.charAt(2),16),r=parseInt(e.charAt(3)+e.charAt(4),16),i=parseInt(e.charAt(5)+e.charAt(6),16)),9===e.length&&(n=parseInt(e.charAt(7)+e.charAt(8),16)/255);else if(u.test(e)){var o=e.match(f);o&&(t=+o[1],r=+o[2],i=+o[3],o[4]&&(n=+o[4]))}return{r:t,g:r,b:i,a:n}}t.parseColor=p;var g={};for(var v in s.HTML_COLORS)g[v]=y(s.HTML_COLORS[v]),g[s.HTML_COLORS[v]]=g[v];function m(e,t,r,i,n){return d[0]=i<<24|r<<16|t<<8|e,n&&(d[0]=4278190079&d[0]),c[0]}function y(e){if(e=e.toLowerCase(),void 0!==g[e])return g[e];var t=p(e),r=t.r,i=t.g,n=t.b,o=t.a,a=m(r,i,n,o=255*o|0,!0);return g[e]=a,a}t.rgbaToFloat=m,t.floatColor=y;var b={};function _(e,t){var r=e.height/e.width,i=t.height/t.width;return r<1&&i>1||r>1&&i<1?1:Math.min(Math.max(i,1/i),Math.max(1/r,r))}t.indexToColor=function(e){if(void 0!==b[e])return b[e];var t=m((16711680&e)>>>16,(65280&e)>>>8,255&e,255,!0);return b[e]=t,t},t.colorToIndex=function(e,t,r,i){return r+(t<<8)+(e<<16)},t.getCorrectionRatio=_,t.matrixFromCamera=function(e,t,r,i,n){var o=e.angle,s=e.ratio,h=e.x,l=e.y,d=t.width,c=t.height,u=(0,a.identity)(),f=Math.min(d,c)-2*i,p=_(t,r);return n?((0,a.multiply)(u,(0,a.translate)((0,a.identity)(),h,l)),(0,a.multiply)(u,(0,a.scale)((0,a.identity)(),s)),(0,a.multiply)(u,(0,a.rotate)((0,a.identity)(),o)),(0,a.multiply)(u,(0,a.scale)((0,a.identity)(),d/f/2/p,c/f/2/p))):((0,a.multiply)(u,(0,a.scale)((0,a.identity)(),f/d*2*p,f/c*2*p)),(0,a.multiply)(u,(0,a.rotate)((0,a.identity)(),-o)),(0,a.multiply)(u,(0,a.scale)((0,a.identity)(),1/s)),(0,a.multiply)(u,(0,a.translate)((0,a.identity)(),-h,-l))),u},t.getMatrixImpact=function(e,t,r){var i=(0,a.multiplyVec2)(e,{x:Math.cos(t.angle),y:Math.sin(t.angle)},0),n=i.x,o=i.y;return 1/Math.sqrt(Math.pow(n,2)+Math.pow(o,2))/r.width},t.extractPixel=function(e,t,r,i){var n=i||new Uint8Array(4);return e.readPixels(t,r,1,1,e.RGBA,e.UNSIGNED_BYTE,n),n},t.validateGraph=function(e){if(!(0,o.default)(e))throw new Error("Sigma: invalid graph instance.");e.forEachNode((function(e,t){if(!Number.isFinite(t.x)||!Number.isFinite(t.y))throw new Error("Sigma: Coordinates of node ".concat(e," are invalid. A node must have a numeric 'x' and 'y' attribute."))}))}},572:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.multiplyVec2=t.multiply=t.translate=t.rotate=t.scale=t.identity=void 0,t.identity=function(){return Float32Array.of(1,0,0,0,1,0,0,0,1)},t.scale=function(e,t,r){return e[0]=t,e[4]="number"==typeof r?r:t,e},t.rotate=function(e,t){var r=Math.sin(t),i=Math.cos(t);return e[0]=i,e[1]=r,e[3]=-r,e[4]=i,e},t.translate=function(e,t,r){return e[6]=t,e[7]=r,e},t.multiply=function(e,t){var r=e[0],i=e[1],n=e[2],o=e[3],a=e[4],s=e[5],h=e[6],l=e[7],d=e[8],c=t[0],u=t[1],f=t[2],p=t[3],g=t[4],v=t[5],m=t[6],y=t[7],b=t[8];return e[0]=c*r+u*o+f*h,e[1]=c*i+u*a+f*l,e[2]=c*n+u*s+f*d,e[3]=p*r+g*o+v*h,e[4]=p*i+g*a+v*l,e[5]=p*n+g*s+v*d,e[6]=m*r+y*o+b*h,e[7]=m*i+y*a+b*l,e[8]=m*n+y*s+b*d,e},t.multiplyVec2=function(e,t,r){void 0===r&&(r=1);var i=e[0],n=e[1],o=e[3],a=e[4],s=e[6],h=e[7],l=t.x,d=t.y;return{x:l*i+d*o+s*r,y:l*n+d*a+h*r}}},883:function(e,t){"use strict";var r=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var i,n,o=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(i=o.next()).done;)a.push(i.value)}catch(e){n={error:e}}finally{try{i&&!i.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}return a};Object.defineProperty(t,"__esModule",{value:!0}),t.getPixelColor=void 0,t.getPixelColor=function(e,t,i,n,o,a){var s=Math.floor(i/a*o),h=Math.floor(e.drawingBufferHeight/a-n/a*o),l=new Uint8Array(4);e.bindFramebuffer(e.FRAMEBUFFER,t),e.readPixels(s,h,1,1,e.RGBA,e.UNSIGNED_BYTE,l);var d=r(l,4);return[d[0],d[1],d[2],d[3]]}}},t={};function r(i){var n=t[i];if(void 0!==n)return n.exports;var o=t[i]={exports:{}};return e[i].call(o.exports,o,o.exports,r),o.exports}r.d=(e,t)=>{for(var i in t)r.o(t,i)&&!r.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var i=r(466);Sigma=i})();